import"../chunks/DsnmJJEf.js";import{i as He}from"../chunks/j-R1GFZz.js";import{d as tt,w as Ye,g as W,e as F,s as L,c as ua,o as zt}from"../chunks/D5GmG_LJ.js";import{I as qt,h as Be,ak as La,K as pa,D as fa,C as za,i as t,a5 as Ct,F as Ca,H as Aa,G as ra,J as Ht,S as bt,al as ja,ap as Da,M as Wt,P as Ma,O as ft,at as ma,ah as ta,_ as oe,aM as oa,aN as la,Q as ha,R as Xa,aO as At,aP as Ft,aQ as ga,aR as jt,aS as Pa,an as qa,aT as Ha,as as Fa,aU as Oa,a3 as Ra,aV as ya,W as Ua,aW as Va,aX as _a,T as Ja,aY as Ba,aZ as Wa,Y as Ga,a_ as Ya,e as m,V as Ka,a$ as Qa,x as Fe,b0 as Ie,b1 as it,m as je,o as we,p,y as Oe,$ as Q,t as I,z as r,B as o,A as i,v as se,b2 as ct,b3 as qe,aL as Me,j as ge,b4 as ba,b5 as at,aK as Za,b6 as es,b7 as ts,n as as,b8 as ss}from"../chunks/OXESmFBH.js";import{p as Se,i as Z,b as wa,u as ca,s as _t,a as Ae}from"../chunks/BQRKTwto.js";import{r as yt,a as ns,b as xa,s as Ke}from"../chunks/BiOPpIbk.js";function Ge(e,a){return a}function is(e,a,s){for(var l=e.items,c=[],n=a.length,v=0;v<n;v++)Ha(a[v].e,c,!0);var u=n>0&&c.length===0&&s!==null;if(u){var h=s.parentNode;Fa(h),h.append(s),l.clear(),Ze(e,a[0].prev,a[n-1].next)}Oa(c,()=>{for(var k=0;k<n;k++){var g=a[k];u||(l.delete(g.k),Ze(e,g.prev,g.next)),ga(g.e,!u)}})}function We(e,a,s,l,c,n=null){var v=e,u={flags:a,items:new Map,first:null},h=(a&ya)!==0;if(h){var k=e;v=Be?qt(La(k)):k.appendChild(pa())}Be&&fa();var g=null,d=!1,x=new Map,_=Ct(()=>{var z=s();return ta(z)?z:z==null?[]:ma(z)}),f,E;function S(){rs(E,f,u,x,v,c,a,l,s),n!==null&&(f.length===0?g?ha(g):g=Wt(()=>n(v)):g!==null&&Xa(g,()=>{g=null}))}za(()=>{E??=Ra,f=t(_);var z=f.length;if(d&&z===0)return;d=z===0;let A=!1;if(Be){var X=Ca(v)===Aa;X!==(z===0)&&(v=ra(),qt(v),Ht(!1),A=!0)}if(Be){for(var $=null,M,y=0;y<z;y++){if(bt.nodeType===ja&&bt.data===Da){v=bt,A=!0,Ht(!1);break}var j=f[y],J=l(j,y);M=Gt(bt,u,$,null,j,J,y,c,a,s),u.items.set(J,M),$=M}z>0&&qt(ra())}if(Be)z===0&&n&&(g=Wt(()=>n(v)));else if(Ma()){var ee=new Set,q=ft;for(y=0;y<z;y+=1){j=f[y],J=l(j,y);var w=u.items.get(J)??x.get(J);w?(a&(jt|At))!==0&&Ta(w,j,y,a):(M=Gt(null,u,null,null,j,J,y,c,a,s,!0),x.set(J,M)),ee.add(J)}for(const[H,b]of u.items)ee.has(H)||q.skipped_effects.add(b.e);q.add_callback(S)}else S();A&&Ht(!0),t(_)}),Be&&(v=bt)}function rs(e,a,s,l,c,n,v,u,h){var k=(v&Va)!==0,g=(v&(jt|At))!==0,d=a.length,x=s.items,_=s.first,f=_,E,S=null,z,A=[],X=[],$,M,y,j;if(k)for(j=0;j<d;j+=1)$=a[j],M=u($,j),y=x.get(M),y!==void 0&&(y.a?.measure(),(z??=new Set).add(y));for(j=0;j<d;j+=1){if($=a[j],M=u($,j),y=x.get(M),y===void 0){var J=l.get(M);if(J!==void 0){l.delete(M),x.set(M,J);var ee=S?S.next:f;Ze(s,S,J),Ze(s,J,ee),Ot(J,ee,c),S=J}else{var q=f?f.e.nodes_start:c;S=Gt(q,s,S,S===null?s.first:S.next,$,M,j,n,v,h)}x.set(M,S),A=[],X=[],f=S.next;continue}if(g&&Ta(y,$,j,v),(y.e.f&Ft)!==0&&(ha(y.e),k&&(y.a?.unfix(),(z??=new Set).delete(y))),y!==f){if(E!==void 0&&E.has(y)){if(A.length<X.length){var w=X[0],H;S=w.prev;var b=A[0],C=A[A.length-1];for(H=0;H<A.length;H+=1)Ot(A[H],w,c);for(H=0;H<X.length;H+=1)E.delete(X[H]);Ze(s,b.prev,C.next),Ze(s,S,b),Ze(s,C,w),f=w,S=C,j-=1,A=[],X=[]}else E.delete(y),Ot(y,f,c),Ze(s,y.prev,y.next),Ze(s,y,S===null?s.first:S.next),Ze(s,S,y),S=y;continue}for(A=[],X=[];f!==null&&f.k!==M;)(f.e.f&Ft)===0&&(E??=new Set).add(f),X.push(f),f=f.next;if(f===null)continue;y=f}A.push(y),S=y,f=y.next}if(f!==null||E!==void 0){for(var T=E===void 0?[]:ma(E);f!==null;)(f.e.f&Ft)===0&&T.push(f),f=f.next;var O=T.length;if(O>0){var ue=(v&ya)!==0&&d===0?c:null;if(k){for(j=0;j<O;j+=1)T[j].a?.measure();for(j=0;j<O;j+=1)T[j].a?.fix()}is(s,T,ue)}}k&&Ua(()=>{if(z!==void 0)for(y of z)y.a?.apply()}),e.first=s.first&&s.first.e,e.last=S&&S.e;for(var ne of l.values())ga(ne.e);l.clear()}function Ta(e,a,s,l){(l&jt)!==0&&la(e.v,a),(l&At)!==0?la(e.i,s):e.i=s}function Gt(e,a,s,l,c,n,v,u,h,k,g){var d=(h&jt)!==0,x=(h&Pa)===0,_=d?x?oe(c,!1,!1):oa(c):c,f=(h&At)===0?v:oa(v),E={i:f,v:_,k:n,a:null,e:null,prev:s,next:l};try{if(e===null){var S=document.createDocumentFragment();S.append(e=pa())}return E.e=Wt(()=>u(e,_,f,k),Be),E.e.prev=s&&s.e,E.e.next=l&&l.e,s===null?g||(a.first=E):(s.next=E,s.e.next=E.e),l!==null&&(l.prev=E,l.e.prev=E.e),E}finally{}}function Ot(e,a,s){for(var l=e.next?e.next.e.nodes_start:s,c=a?a.e.nodes_start:s,n=e.e.nodes_start;n!==null&&n!==l;){var v=qa(n);c.before(n),n=v}}function Ze(e,a,s){a===null?e.first=s:(a.next=s,a.e.next=s&&s.e),s!==null&&(s.prev=a,s.e.prev=a&&a.e)}function os(e,a,s,l,c){Be&&fa();var n=a.$$slots?.[s],v=!1;n===!0&&(n=a.children,v=!0),n===void 0||n(e,v?()=>l:l)}const va=[...` 	
\r\f¬†\v\uFEFF`];function ls(e,a,s){var l=e==null?"":""+e;if(a&&(l=l?l+" "+a:a),s){for(var c in s)if(s[c])l=l?l+" "+c:c;else if(l.length)for(var n=c.length,v=0;(v=l.indexOf(c,v))>=0;){var u=v+n;(v===0||va.includes(l[v-1]))&&(u===l.length||va.includes(l[u]))?l=(v===0?"":l.substring(0,v))+l.substring(u+1):v=u}}return l===""?null:l}function cs(e,a){return e==null?null:String(e)}function ke(e,a,s,l,c,n){var v=e.__className;if(Be||v!==s||v===void 0){var u=ls(s,l,n);(!Be||u!==e.getAttribute("class"))&&(u==null?e.removeAttribute("class"):e.className=u),e.__className=s}else if(n&&c!==n)for(var h in n){var k=!!n[h];(c==null||k!==!!c[h])&&e.classList.toggle(h,k)}return n}function aa(e,a,s,l){var c=e.__style;if(Be||c!==a){var n=cs(a);(!Be||n!==e.getAttribute("style"))&&(n==null?e.removeAttribute("style"):e.style.cssText=n),e.__style=a}return l}function Sa(e,a,s=!1){if(e.multiple){if(a==null)return;if(!ta(a))return Ba();for(var l of e.options)l.selected=a.includes(xt(l));return}for(l of e.options){var c=xt(l);if(Wa(c,a)){l.selected=!0;return}}(!s||a!==void 0)&&(e.selectedIndex=-1)}function vs(e){var a=new MutationObserver(()=>{Sa(e,e.__value)});a.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Ga(()=>{a.disconnect()})}function wt(e,a,s=a){var l=!0;_a(e,"change",c=>{var n=c?"[selected]":":checked",v;if(e.multiple)v=[].map.call(e.querySelectorAll(n),xt);else{var u=e.querySelector(n)??e.querySelector("option:not([disabled])");v=u&&xt(u)}s(v)}),Ja(()=>{var c=a();if(Sa(e,c,l),l&&c===void 0){var n=e.querySelector(":checked");n!==null&&(c=xt(n),s(c))}e.__value=c,l=!1}),vs(e)}function xt(e){return"__value"in e?e.__value:e.value}function $t(e,a,s=a){var l=Ya(),c=new WeakSet;_a(e,"input",n=>{var v=n?e.defaultValue:e.value;if(v=Rt(e)?Ut(v):v,s(v),ft!==null&&c.add(ft),l&&v!==(v=a())){var u=e.selectionStart,h=e.selectionEnd;e.value=v??"",h!==null&&(e.selectionStart=u,e.selectionEnd=Math.min(h,e.value.length))}}),(Be&&e.defaultValue!==e.value||m(a)==null&&e.value)&&(s(Rt(e)?Ut(e.value):e.value),ft!==null&&c.add(ft)),Ka(()=>{var n=a();if(e===document.activeElement){var v=Qa??ft;if(c.has(v))return}Rt(e)&&n===Ut(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}function Rt(e){var a=e.type;return a==="number"||a==="range"}function Ut(e){return e===""?null:+e}function ds(e){return function(...a){var s=a[0];return s.stopPropagation(),e?.apply(this,a)}}function Ea(e,a){var s=e.$$events?.[a.type],l=ta(s)?s.slice():s==null?[]:[s];for(var c of l)c.call(this,a)}let kt=null;async function us(){if(kt)return kt;try{return console.log("üîß Loading real XLN server module..."),kt=await import(new URL("/xln/server.js",window.location.origin).href),console.log("‚úÖ Real XLN server loaded"),kt}catch(e){throw console.error("‚ùå Failed to load XLN server:",e),new Error(`Cannot load XLN server: ${e.message}`)}}async function Ee(){return await us()}const Qe={async main(){return(await Ee()).main()},async createEmptyEnv(){return(await Ee()).createEmptyEnv()},async applyServerInput(e,a){return(await Ee()).applyServerInput(e,a)},async processUntilEmpty(e){return(await Ee()).processUntilEmpty(e)},async runDemo(e){return(await Ee()).runDemo(e)},async clearDatabase(){return(await Ee()).clearDatabase()},async getHistory(){const e=await Ee();return e.getHistory?e.getHistory():[]},async getSnapshot(e){const a=await Ee();return a.getSnapshot?a.getSnapshot(e):null},async generateLazyEntityId(){return(await Ee()).generateLazyEntityId()},async generateNumberedEntityId(e){return(await Ee()).generateNumberedEntityId(e)},async generateNamedEntityId(e){return(await Ee()).generateNamedEntityId(e)},async createLazyEntity(e){return(await Ee()).createLazyEntity(e)},async createNumberedEntity(e){return(await Ee()).createNumberedEntity(e)},async requestNamedEntity(e,a){return(await Ee()).requestNamedEntity(e,a)},async formatEntityDisplay(e){return(await Ee()).formatEntityDisplay(e)},async formatSignerDisplay(e){return(await Ee()).formatSignerDisplay(e)},async generateEntityAvatar(e){return(await Ee()).generateEntityAvatar(e)},async generateSignerAvatar(e){return(await Ee()).generateSignerAvatar(e)},async getEntityDisplayInfo(e){return(await Ee()).getEntityDisplayInfo(e)},async getSignerDisplayInfo(e){return(await Ee()).getSignerDisplayInfo(e)},async getJurisdictions(){return(await Ee()).getJurisdictions()},async connectToEthereum(){return(await Ee()).connectToEthereum()}},Xe=Ye(null),Nt=Ye(!0),Yt=Ye(null),ka=tt(Xe,e=>e?.replicas||new Map),gt=tt(Xe,e=>e?.history||[]),ps=tt(Xe,e=>e?.height||0),dt={async initialize(){try{Nt.set(!0),Yt.set(null);const e=await Qe.main(),a=await Qe.getHistory();return e.history=Array.isArray(a)?a:[],e.serverOutputs=Array.isArray(e.serverOutputs)?e.serverOutputs:[],console.log(`üï∞Ô∏è xlnStore.initialize: history length = ${e.history.length}`),Xe.set(e),Nt.set(!1),console.log("üéØ XLN Environment initialized:",e),e}catch(e){const a=e instanceof Error?e.message:"Failed to initialize XLN environment";throw Yt.set(a),Nt.set(!1),console.error("‚ùå XLN initialization failed:",e),e}},async applyServerInput(e){const a=W(Xe);if(!a)throw new Error("XLN environment not initialized");try{const s=await Qe.applyServerInput(a,{serverTxs:e.serverTxs||[],entityInputs:e.entityInputs||[]});return s.entityOutbox&&s.entityOutbox.length>0&&await Qe.processUntilEmpty(a,s.entityOutbox),Xe.set(a),s}catch(s){throw console.error("‚ùå Failed to apply server input:",s),s}},async submitChatMessage(e,a,s){const l=[{entityId:e,signerId:a,entityTxs:[{type:"chat",data:{from:a,message:s}}],destinations:[]}],c=W(Xe);if(c&&window.processUntilEmpty){console.log("üî• Calling processUntilEmpty for chat");const n=window.processUntilEmpty(c,[],l);return this.updateFromEnvironment(),n}else return this.applyServerInput({entityInputs:l})},async submitProposal(e,a,s){const l=[{entityId:e,signerId:a,entityTxs:[{type:"propose",data:{action:{type:"collective_message",data:{message:s}},proposer:a}}],destinations:[]}],c=W(Xe);if(c&&window.processUntilEmpty){console.log("üî• Calling processUntilEmpty for proposal");const n=window.processUntilEmpty(c,[],l);return this.updateFromEnvironment(),n}else return this.applyServerInput({entityInputs:l})},async submitVote(e,a,s,l,c){const n=[{entityId:e,signerId:a,entityTxs:[{type:"vote",data:{proposalId:s,voter:a,choice:l,comment:c}}],destinations:[]}],v=W(Xe);if(v&&window.processUntilEmpty){console.log("üî• Calling processUntilEmpty for vote");const u=window.processUntilEmpty(v,[],n);return this.updateFromEnvironment(),u}else return this.applyServerInput({entityInputs:n})},async createEntity(e){try{let a,s;if(e.entityType==="lazy")a=await Qe.createLazyEntity(e.entityName,e.validators,BigInt(e.threshold),e.jurisdiction),s=await Qe.generateLazyEntityId(e.validators.map((n,v)=>({name:n,weight:1})),BigInt(e.threshold));else{const n=await Qe.createNumberedEntity(e.entityName,e.validators,BigInt(e.threshold),e.jurisdiction);a=n.config,s=await Qe.generateNumberedEntityId(n.entityNumber)}const l=e.validators.map((n,v)=>({type:"importReplica",entityId:s,signerId:n,data:{config:a,isProposer:v===0}})),c=W(Xe);if(c&&window.processUntilEmpty){console.log("üî• Calling processUntilEmpty with serverTxs");const n=window.processUntilEmpty(c,l);return this.updateFromEnvironment(),n}else return this.applyServerInput({serverTxs:l})}catch(a){throw console.error("‚ùå Failed to create entity:",a),a}},async runDemo(){const e=W(Xe);if(!e)throw new Error("XLN environment not initialized");try{await Qe.runDemoWrapper(e),Xe.set(e),console.log("‚úÖ Demo completed successfully")}catch(a){throw console.error("‚ùå Demo failed:",a),a}},async clearDatabase(){try{await Qe.clearDatabase(),await this.initialize(),console.log("‚úÖ Database cleared and reinitialized")}catch(e){throw console.error("‚ùå Failed to clear database:",e),e}},getHistorySnapshot(e){const a=W(Xe);return!a||!a.history||e<0||e>=a.history.length?null:a.history[e]},getReplica(e,a){const s=W(ka),l=[`${e}:${a}`,`${a}:${e}`,e,a];for(const c of l){const n=s.get(c);if(n&&n.entityId===e&&n.signerId===a)return n}for(const c of s.values())if(c.entityId===e&&c.signerId===a)return c;return null}},Kt={theme:"dark",dropdownMode:"signer-first",serverDelay:0,componentStates:{}},De=Ye(Kt),Vt="xln-settings",Jt="xlnComponentStates",Tt={loadFromStorage(){try{if(typeof localStorage>"u")return;const e=localStorage.getItem(Vt);if(e){const s=JSON.parse(e);De.update(l=>({...l,...s}))}const a=localStorage.getItem(Jt);if(a){const s=JSON.parse(a);De.update(l=>({...l,componentStates:s}))}console.log("‚öôÔ∏è Settings loaded from localStorage")}catch(e){console.error("‚ùå Failed to load settings:",e),De.set(Kt)}},saveToStorage(){try{if(typeof localStorage>"u")return;const e=W(De),{componentStates:a,...s}=e;localStorage.setItem(Vt,JSON.stringify(s)),localStorage.setItem(Jt,JSON.stringify(a)),console.log("üíæ Settings saved to localStorage")}catch(e){console.error("‚ùå Failed to save settings:",e)}},setTheme(e){De.update(a=>({...a,theme:e})),this.saveToStorage(),typeof document<"u"&&document.documentElement.setAttribute("data-theme",e)},toggleTheme(){const e=W(De);this.setTheme(e.theme==="dark"?"light":"dark")},setDropdownMode(e){De.update(a=>({...a,dropdownMode:e})),this.saveToStorage()},toggleDropdownMode(){const e=W(De);this.setDropdownMode(e.dropdownMode==="signer-first"?"entity-first":"signer-first")},setServerDelay(e){De.update(a=>({...a,serverDelay:e})),this.saveToStorage()},getComponentState(e){const a=W(De);return a.componentStates[e]!==void 0?a.componentStates[e]:e.includes("consensus-")||e.includes("chat-")},setComponentState(e,a){De.update(s=>({...s,componentStates:{...s.componentStates,[e]:a}})),this.saveToStorage()},toggleComponentState(e){const a=this.getComponentState(e);this.setComponentState(e,!a)},resetToDefaults(){De.set(Kt),this.saveToStorage(),typeof localStorage<"u"&&(localStorage.removeItem(Vt),localStorage.removeItem(Jt))},initialize(){this.loadFromStorage();const e=W(De);typeof document<"u"&&document.documentElement.setAttribute("data-theme",e.theme)}},Re=Ye([]),lt=Ye(null),pt=Ye(1),da="xln-entity-tabs",vt={loadFromStorage(){try{if(typeof localStorage>"u")return;const e=localStorage.getItem(da);if(e){const a=JSON.parse(e);Re.set(a.tabs||[]),lt.set(a.activeTabId||null),pt.set(a.nextTabId||1),console.log("üìÅ Tabs loaded from localStorage:",a)}}catch(e){console.error("‚ùå Failed to load tabs:",e),Re.set([]),lt.set(null),pt.set(1)}},saveToStorage(){try{if(typeof localStorage>"u")return;const e={tabs:W(Re),activeTabId:W(lt),nextTabId:W(pt)};localStorage.setItem(da,JSON.stringify(e)),console.log("üíæ Tabs saved to localStorage:",e)}catch(e){console.error("‚ùå Failed to save tabs:",e)}},generateTabId(){const e=W(pt);return pt.set(e+1),`tab-${e}`},addTab(e,a,s){const c=W(Re).length+1,n={id:this.generateTabId(),title:`Entity Panel ${c}`,jurisdiction:s||"Ethereum",signer:a||"",entityId:e||"",isActive:!1};return Re.update(v=>[...v,n]),this.setActiveTab(n.id),this.saveToStorage(),console.log("‚ûï Added new panel:",n),n},closeTab(e){const a=W(Re);if(console.log("‚ùå Closing tab:",e),a.length<=1){console.log("‚ö†Ô∏è Cannot close last tab");return}if(a.findIndex(n=>n.id===e)===-1)return;const l=a.filter(n=>n.id!==e);Re.set(l),W(lt)===e&&this.setActiveTab(l[0].id),this.saveToStorage()},setActiveTab(e){console.log("üéØ Setting active tab:",e),Re.update(a=>a.map(s=>({...s,isActive:s.id===e}))),lt.set(e),this.saveToStorage()},getActiveTab(){const e=W(Re),a=W(lt);return e.find(s=>s.id===a)||null},updateTab(e,a){Re.update(s=>s.map(l=>l.id===e?{...l,...a}:l)),this.saveToStorage()},getTab(e){return W(Re).find(s=>s.id===e)||null},initializeDefaultTabs(){W(Re).length===0&&(this.addTab(),this.addTab(),this.addTab())},clearAllTabs(){Re.set([]),lt.set(null),pt.set(1),this.saveToStorage()}},fs={id:"quick-start",title:"Quick Start: Create Your First Entity",description:"Get started with XLN in under 60 seconds. Create Alice's entity and send your first transaction.",difficulty:"beginner",estimatedTime:"1 minute",steps:[{id:"navigate",title:"Welcome to XLN",description:"You're now in the XLN dashboard. Let's create your first entity!",action:"wait",target:"#formationTabContent",explanation:"The formation tab is where you create new entities. Think of entities as smart wallets or organizations."},{id:"select-entity-type",title:"Choose Entity Type",description:'Select "lazy" entity type for quick setup',action:"select",target:"#entityTypeSelect",value:"lazy",explanation:"Lazy entities are perfect for testing - they work without on-chain registration."},{id:"name-entity",title:"Name Your Entity",description:"Give your entity a memorable name",action:"fill",target:"#entityNameInput",value:"My First Entity",explanation:"Entity names help you identify them in the interface. Choose something meaningful!"},{id:"select-validator",title:"Choose Validator",description:"Select Alice as your validator (the signer who can authorize transactions)",action:"click",target:'[data-validator-id="0"] .validator-selector',explanation:"Validators are the accounts that can sign transactions for this entity. Alice is a pre-configured test account."},{id:"pick-alice",title:"Pick Alice",description:"Click on alice.eth from the dropdown",action:"click",target:'#validatorOptions0 [data-signer="alice"]',explanation:"Alice is one of the test accounts available in XLN for demonstration purposes."},{id:"set-threshold",title:"Set Voting Threshold",description:"Keep threshold at 1 (Alice can act alone)",action:"fill",target:"#thresholdSlider",value:"1",explanation:"Threshold determines how many validators must agree for transactions. 1 means Alice has full control."},{id:"create-entity",title:"Create Entity",description:"Click the Create Entity button to launch your entity!",action:"click",target:'button[type="submit"]',explanation:"This creates the entity and imports it into all relevant validator accounts."},{id:"verify-creation",title:"Entity Created!",description:"Your entity is now live and ready for transactions",action:"wait",target:".entity-panel",explanation:"üéâ Congratulations! You've created your first XLN entity. You can now send messages, create proposals, and interact with other entities."}]},ms={id:"complete-workflow",title:"Complete Entity & Channel Workflow",description:"Master the full XLN experience: create entities, demonstrate governance, and prepare for channels.",difficulty:"intermediate",estimatedTime:"15 minutes",steps:[{id:"setup",title:"Navigate to XLN Dashboard",description:"Load the XLN interface and ensure the environment is ready",action:"navigate",target:"/",explanation:"The XLN dashboard provides entity formation, channel management, and consensus monitoring all in one interface."},{id:"alice-entity-type",title:"Create Alice's Simple Entity",description:'Select lazy entity type and name it "Alice Personal Wallet"',action:"select",target:"#entityTypeSelect",value:"lazy",explanation:"This creates a simple 1-of-1 entity where Alice has full control. Perfect for personal wallets or testing."},{id:"alice-entity-name",title:"Name Alice's Entity",description:'Enter "Alice Personal Wallet" as the entity name',action:"fill",target:"#entityNameInput",value:"Alice Personal Wallet"},{id:"alice-validator",title:"Set Alice as Validator",description:"Select Alice as the validator for her personal entity",action:"click",target:'[data-validator-id="0"] .validator-selector'},{id:"alice-threshold",title:"Set Threshold to 1",description:"Set voting threshold to 1 (Alice can act alone)",action:"fill",target:"#thresholdSlider",value:"1"},{id:"create-alice-entity",title:"Create Alice's Entity",description:"Click Create Entity to launch Alice's personal wallet",action:"click",target:'button[type="submit"]',explanation:"Entity creation involves cryptographic consensus. Alice's entity is now live and can receive transactions."},{id:"add-validators",title:"Create Multi-Signature Hub",description:"Add more validators for the hub entity",action:"click",target:'button[data-action="add-validator"]',explanation:"Multi-signature entities provide enhanced security. Any 2 of the 3 validators can authorize transactions."},{id:"hub-name",title:"Name the Hub",description:'Enter "Payment Hub ABC" as the hub name',action:"fill",target:"#entityNameInput",value:"Payment Hub ABC"},{id:"hub-threshold",title:"Set Hub Threshold",description:"Set threshold to 2 (requires 2 out of 3 signatures)",action:"fill",target:"#thresholdSlider",value:"2"},{id:"create-hub",title:"Create Hub Entity",description:"Click Create Entity to launch the multi-sig hub",action:"click",target:'button[type="submit"]',explanation:"The hub is now operational with 3 validator replicas. Each validator maintains their own view of the entity state."},{id:"configure-panels",title:"Configure Entity Panels",description:"Set up panels to show different validator views",action:"click",target:".entity-panel:first-child .unified-dropdown-btn",explanation:"Each panel can show a different signer's view of any entity they participate in."},{id:"send-chat",title:"Send Chat Message",description:"Demonstrate entity communication with a chat message",action:"fill",target:".controls-section textarea",value:"Hello from Alice! Ready to create channels.",explanation:"Chat messages are cryptographically signed and become part of the entity's permanent state."},{id:"create-proposal",title:"Create Channel Opening Proposal",description:"Propose to open a payment channel with the hub",action:"select",target:".controls-dropdown",value:"proposal",explanation:"Proposals enable democratic decision-making. This proposal would authorize opening a payment channel."},{id:"multi-sig-voting",title:"Demonstrate Multi-Signature Voting",description:"Other validators vote on the proposal",action:"click",target:'.vote-button[data-choice="yes"]',explanation:"With multiple YES votes, the proposal reaches quorum and will be executed automatically."},{id:"time-machine",title:"Use Time Machine",description:"Review entity history using the time machine controls",action:"click",target:'.time-btn-compact[data-action="back"]',explanation:"The time machine allows you to replay the entire entity history, perfect for audits and debugging."},{id:"completion",title:"Tutorial Complete!",description:"You've mastered entity creation and governance. Ready for channels!",action:"wait",target:".entity-panels-container",explanation:"üéâ Tutorial complete! You've created entities, demonstrated multi-signature governance, and are ready for channel operations."}]},hs={id:"multi-sig-governance",title:"Multi-Signature Governance",description:"Learn democratic decision-making with multi-signature entities.",difficulty:"intermediate",estimatedTime:"10 minutes",steps:[{id:"create-multi-sig",title:"Create Multi-Sig Entity",description:"Set up a 2-of-3 entity with Alice, Bob, and Carol",action:"select",target:"#entityTypeSelect",value:"lazy",explanation:"Multi-signature entities require multiple validators to agree before executing transactions."}]},Lt=[fs,ms,hs];function Qt(e){return Lt.find(a=>a.id===e)}const Zt=Ye(!1),mt=Ye(null),et=Ye(0),It=Ye({}),St=tt(mt,e=>e?Qt(e):null),ea=tt([St,et],([e,a])=>e?.steps[a]||null);tt([St,et],([e,a])=>e?(a+1)/e.steps.length*100:0);class gs{highlightedElement=null;startTutorial(a){const s=Qt(a);if(!s){console.error(`Tutorial not found: ${a}`);return}mt.set(a),et.set(0),Zt.set(!0),console.log(`üéØ Starting tutorial: ${s.title}`),this.applyCurrentStep()}nextStep(){const a=W(St),s=W(et);a&&(s<a.steps.length-1?(et.update(l=>l+1),this.applyCurrentStep()):this.completeTutorial())}prevStep(){W(et)>0&&(et.update(s=>s-1),this.applyCurrentStep())}executeStepAction(){const a=W(ea);if(!a)return;const s=document.querySelector(a.target);if(!s){console.warn(`üéØ Tutorial target not found: ${a.target}`);return}switch(a.action){case"click":s.click();break;case"fill":(s instanceof HTMLInputElement||s instanceof HTMLTextAreaElement)&&(s.value=a.value||"",s.dispatchEvent(new Event("input",{bubbles:!0})));break;case"select":s instanceof HTMLSelectElement&&(s.value=a.value||"",s.dispatchEvent(new Event("change",{bubbles:!0})));break;case"navigate":a.value&&(window.location.href=a.value);break}setTimeout(()=>this.nextStep(),1500)}applyCurrentStep(){const a=W(ea);if(!a)return;if(this.clearHighlight(),a.target&&a.action!=="wait"){const c=document.querySelector(a.target);c&&(this.highlightElement(c),c.scrollIntoView({behavior:"smooth",block:"center"}))}const s=W(mt),l=W(et);s&&(It.update(c=>({...c,[s]:l})),this.saveProgressToStorage())}highlightElement(a){a.classList.add("tutorial-highlight"),this.highlightedElement=a}clearHighlight(){this.highlightedElement&&(this.highlightedElement.classList.remove("tutorial-highlight"),this.highlightedElement=null)}completeTutorial(){const a=W(mt);console.log(`üéâ Tutorial completed: ${a}`),this.endTutorial(),this.showCompletionMessage()}endTutorial(){Zt.set(!1),mt.set(null),et.set(0),this.clearHighlight()}goToStep(a){const s=W(St);!s||a<0||a>=s.steps.length||(et.set(a),this.applyCurrentStep())}getTutorialProgress(a){return W(It)[a]||0}isTutorialCompleted(a){const s=Qt(a);return s?this.getTutorialProgress(a)>=s.steps.length-1:!1}saveProgressToStorage(){const a=W(It);localStorage.setItem("xln-tutorial-progress",JSON.stringify(a))}loadProgressFromStorage(){try{const a=localStorage.getItem("xln-tutorial-progress");if(a){const s=JSON.parse(a);It.set(s)}}catch(a){console.warn("Failed to load tutorial progress:",a)}}showCompletionMessage(){console.log("üéâ Tutorial completed! Great job!"),window.dispatchEvent(new CustomEvent("tutorial-completed",{detail:{tutorialId:W(mt)}}))}getAvailableTutorials(){return Lt}getTutorialsByDifficulty(a){return Lt.filter(s=>s.difficulty===a)}}const ht=new gs;ht.loadProgressFromStorage();var ys=I('<div class="progress-container svelte-19yv7yv"><div class="progress-bar svelte-19yv7yv"><div class="progress-fill svelte-19yv7yv"></div></div> <span class="progress-text svelte-19yv7yv"> </span></div>'),_s=I('<div><div class="tutorial-card-header svelte-19yv7yv"><div class="tutorial-difficulty svelte-19yv7yv"><span class="difficulty-emoji svelte-19yv7yv"> </span> <span class="difficulty-text svelte-19yv7yv"> </span></div> <div class="tutorial-time svelte-19yv7yv"> </div></div> <div class="tutorial-card-content svelte-19yv7yv"><h3 class="tutorial-card-title svelte-19yv7yv"> </h3> <p class="tutorial-card-description svelte-19yv7yv"> </p> <!></div> <div class="tutorial-card-actions svelte-19yv7yv"><button><!></button> <div class="tutorial-steps-count svelte-19yv7yv"> </div></div></div>'),bs=I('<div class="tutorial-launcher-overlay svelte-19yv7yv"><div class="tutorial-launcher-backdrop svelte-19yv7yv"></div> <div class="tutorial-launcher-panel svelte-19yv7yv"><div class="launcher-header svelte-19yv7yv"><div class="launcher-title svelte-19yv7yv"><h2 class="svelte-19yv7yv">üéØ XLN Interactive Tutorials</h2> <p class="svelte-19yv7yv">Learn XLN step-by-step with guided tutorials</p></div> <button class="launcher-close-btn svelte-19yv7yv">√ó</button></div> <div class="difficulty-filter svelte-19yv7yv"><label class="svelte-19yv7yv">Filter by difficulty:</label> <select class="difficulty-select svelte-19yv7yv"><option>All Tutorials</option><option>üü¢ Beginner</option><option>üü° Intermediate</option><option>üî¥ Advanced</option></select></div> <div class="tutorials-grid svelte-19yv7yv"></div> <div class="launcher-footer svelte-19yv7yv"><div class="footer-note svelte-19yv7yv">üí° Tutorials are interactive and guide you through the actual XLN interface</div></div></div></div>');function ws(e,a){Fe(a,!1);const s=oe();let l=Se(a,"isVisible",12,!1),c=oe("all");function n(_){ht.startTutorial(_.id),l(!1)}function v(){l(!1)}function u(_){switch(_){case"beginner":return"üü¢";case"intermediate":return"üü°";case"advanced":return"üî¥";default:return"‚ö™"}}function h(_){return ht.getTutorialProgress(_)}function k(_){return ht.isTutorialCompleted(_)}Ie(()=>(t(c),ht),()=>{Q(s,t(c)==="all"?Lt:ht.getTutorialsByDifficulty(t(c)))}),it(),He();var g=je(),d=we(g);{var x=_=>{var f=bs(),E=r(f),S=o(E,2),z=r(S),A=o(r(z),2);i(z);var X=o(z,2),$=o(r(X),2);se(()=>{t(c),ct(()=>{})});var M=r($);M.value=M.__value="all";var y=o(M);y.value=y.__value="beginner";var j=o(y);j.value=j.__value="intermediate";var J=o(j);J.value=J.__value="advanced",i($),i(X);var ee=o(X,2);We(ee,5,()=>t(s),Ge,(q,w)=>{var H=_s();let b;var C=r(H),T=r(C),O=r(T),ue=r(O,!0);i(O);var ne=o(O,2),te=r(ne,!0);i(ne),i(T);var G=o(T,2),P=r(G);i(G),i(C);var Y=o(C,2),N=r(Y),K=r(N,!0);i(N);var pe=o(N,2),_e=r(pe,!0);i(pe);var Te=o(pe,2);{var ae=ce=>{var fe=ys(),ye=r(fe),be=r(ye);i(ye);var U=o(ye,2),me=r(U);i(U),i(fe),se((ze,$e)=>{aa(be,`width: ${ze??""}%`),L(me,`${$e??""} / ${t(w),m(()=>t(w).steps.length)??""} steps`)},[()=>(t(w),m(()=>h(t(w).id)/t(w).steps.length*100)),()=>(t(w),m(()=>h(t(w).id)+1))]),p(ce,fe)};Z(Te,ce=>{t(w),m(()=>h(t(w).id)>0)&&ce(ae)})}i(Y);var R=o(Y,2),re=r(R);let B;var D=r(re);{var he=ce=>{var fe=Me("‚úÖ Restart Tutorial");p(ce,fe)},de=ce=>{var fe=je(),ye=we(fe);{var be=me=>{var ze=Me("‚ñ∂Ô∏è Resume Tutorial");p(me,ze)},U=me=>{var ze=Me("üöÄ Start Tutorial");p(me,ze)};Z(ye,me=>{t(w),m(()=>h(t(w).id)>0)?me(be):me(U,!1)},!0)}p(ce,fe)};Z(D,ce=>{t(w),m(()=>k(t(w).id))?ce(he):ce(de,!1)})}i(re);var ve=o(re,2),le=r(ve);i(ve),i(R),i(H),se((ce,fe,ye)=>{b=ke(H,1,"tutorial-card svelte-19yv7yv",null,b,ce),L(ue,fe),L(te,(t(w),m(()=>t(w).difficulty))),L(P,`‚è±Ô∏è ${t(w),m(()=>t(w).estimatedTime)??""}`),L(K,(t(w),m(()=>t(w).title))),L(_e,(t(w),m(()=>t(w).description))),B=ke(re,1,"tutorial-start-btn svelte-19yv7yv",null,B,ye),L(le,`${t(w),m(()=>t(w).steps.length)??""} steps`)},[()=>({completed:k(t(w).id)}),()=>(t(w),m(()=>u(t(w).difficulty))),()=>({resume:h(t(w).id)>0})]),F("click",re,()=>n(t(w))),p(q,H)}),i(ee),qe(2),i(S),i(f),F("click",E,v),F("click",A,v),wt($,()=>t(c),q=>Q(c,q)),p(_,f)};Z(d,_=>{l()&&_(x)})}p(e,g),Oe()}var xs=I('<div class="tutorial-explanation svelte-apjo2k"><span class="tutorial-explanation-icon svelte-apjo2k">üí°</span> <span class="svelte-apjo2k"> </span></div>'),Ts=I('<div class="tutorial-action-hint svelte-apjo2k"><button class="tutorial-action-btn svelte-apjo2k"><!></button></div>'),Ss=I('<div class="tutorial-overlay svelte-apjo2k"><div class="tutorial-backdrop svelte-apjo2k"></div> <div class="tutorial-panel svelte-apjo2k"><div class="tutorial-header svelte-apjo2k"><div class="tutorial-progress-container svelte-apjo2k"><div class="tutorial-progress-bar svelte-apjo2k"><div class="tutorial-progress-fill svelte-apjo2k"></div></div> <span class="tutorial-step-counter svelte-apjo2k"> </span></div> <button class="tutorial-close-btn svelte-apjo2k">√ó</button></div> <div class="tutorial-content svelte-apjo2k"><h3 class="tutorial-title svelte-apjo2k"> </h3> <p class="tutorial-description svelte-apjo2k"> </p> <!> <!></div> <div class="tutorial-navigation svelte-apjo2k"><button class="tutorial-nav-btn tutorial-prev-btn svelte-apjo2k">‚Üê Previous</button> <button class="tutorial-skip-btn svelte-apjo2k">Skip Tutorial</button> <button class="tutorial-nav-btn tutorial-next-btn svelte-apjo2k"> </button></div></div></div>');function Es(e,a){Fe(a,!1);const s=oe(),l=oe();let c=Se(a,"isVisible",12,!1),n=Se(a,"currentStep",12,0),v=Se(a,"totalSteps",8,0),u=Se(a,"tutorialData",24,()=>[]);const h=ua();let k=oe(),g=null;zt(()=>{console.log("üéØ Tutorial overlay mounted")});function d(){n()<v()-1&&(ca(n),E(),h("stepChanged",{step:n(),stepData:t(s)}))}function x(){n()>0&&(ca(n,-1),E(),h("stepChanged",{step:n(),stepData:t(s)}))}function _(){c(!1),S(),h("close")}function f(){if(!t(s)?.targetSelector||!t(s)?.action)return;const $=document.querySelector(t(s).targetSelector);if(!$){console.warn(`üéØ Tutorial target not found: ${t(s).targetSelector}`);return}switch(t(s).action){case"click":$.click();break;case"fill":($ instanceof HTMLInputElement||$ instanceof HTMLTextAreaElement)&&($.value=t(s).actionData||"",$.dispatchEvent(new Event("input",{bubbles:!0})));break;case"select":$ instanceof HTMLSelectElement&&($.value=t(s).actionData||"",$.dispatchEvent(new Event("change",{bubbles:!0})));break}setTimeout(d,1e3)}function E(){if(S(),!t(s)?.targetSelector||!t(s)?.highlightElement)return;const $=document.querySelector(t(s).targetSelector);$&&($.classList.add("tutorial-highlight"),g=$,$.scrollIntoView({behavior:"smooth",block:"center"}))}function S(){g&&(g.classList.remove("tutorial-highlight"),g=null)}Ie(()=>(ge(u()),ge(n())),()=>{Q(s,u()[n()]||null)}),Ie(()=>(ge(v()),ge(n())),()=>{Q(l,v()>0?(n()+1)/v()*100:0)}),Ie(()=>(ge(c()),t(s)),()=>{c()&&t(s)&&E()}),it(),He();var z=je(),A=we(z);{var X=$=>{var M=Ss(),y=r(M),j=o(y,2),J=r(j),ee=r(J),q=r(ee),w=r(q);i(q);var H=o(q,2),b=r(H);i(H),i(ee);var C=o(ee,2);i(J);var T=o(J,2),O=r(T),ue=r(O,!0);i(O);var ne=o(O,2),te=r(ne,!0);i(ne);var G=o(ne,2);{var P=R=>{var re=xs(),B=o(r(re),2),D=r(B,!0);i(B),i(re),se(()=>L(D,(t(s),m(()=>t(s).explanation)))),p(R,re)};Z(G,R=>{t(s),m(()=>t(s).explanation)&&R(P)})}var Y=o(G,2);{var N=R=>{var re=Ts(),B=r(re),D=r(B);{var he=ve=>{var le=Me("üñ±Ô∏è Click for me");p(ve,le)},de=ve=>{var le=je(),ce=we(le);{var fe=be=>{var U=Me("‚úèÔ∏è Fill for me");p(be,U)},ye=be=>{var U=je(),me=we(U);{var ze=Ne=>{var Ue=Me("üìã Select for me");p(Ne,Ue)},$e=Ne=>{var Ue=Me("‚ñ∂Ô∏è Do action");p(Ne,Ue)};Z(me,Ne=>{t(s),m(()=>t(s).action==="select")?Ne(ze):Ne($e,!1)},!0)}p(be,U)};Z(ce,be=>{t(s),m(()=>t(s).action==="fill")?be(fe):be(ye,!1)},!0)}p(ve,le)};Z(D,ve=>{t(s),m(()=>t(s).action==="click")?ve(he):ve(de,!1)})}i(B),i(re),F("click",B,f),p(R,re)};Z(Y,R=>{t(s),m(()=>t(s).action&&t(s).targetSelector)&&R(N)})}i(T);var K=o(T,2),pe=r(K),_e=o(pe,2),Te=o(_e,2),ae=r(Te,!0);i(Te),i(K),i(j),i(M),wa(M,R=>Q(k,R),()=>t(k)),se(()=>{aa(w,`width: ${t(l)??""}%`),L(b,`Step ${n()+1} of ${v()??""}`),L(ue,(t(s),m(()=>t(s).title))),L(te,(t(s),m(()=>t(s).description))),pe.disabled=n()===0,Te.disabled=n()>=v()-1,L(ae,n()>=v()-1?"Finish":"Next ‚Üí")}),F("click",y,_),F("click",C,_),F("click",pe,x),F("click",_e,_),F("click",Te,d),p($,M)};Z(A,$=>{c()&&t(s)&&$(X)})}p(e,z),Oe()}var ks=I('<div class="modal-overlay svelte-1cd4pz7"><div class="modal-content svelte-1cd4pz7"><div class="modal-header svelte-1cd4pz7"><h3 class="svelte-1cd4pz7">‚öôÔ∏è Settings</h3> <button class="modal-close svelte-1cd4pz7">&times;</button></div> <div class="modal-body svelte-1cd4pz7"><div class="setting-group svelte-1cd4pz7"><label for="dropdownModeToggle" class="svelte-1cd4pz7"><strong class="svelte-1cd4pz7">Dropdown Hierarchy Mode</strong> <br class="svelte-1cd4pz7"/><small class="svelte-1cd4pz7">Toggle between Jurisdiction‚ÜíSigner‚ÜíEntity vs Jurisdiction‚ÜíEntity‚ÜíSigners</small></label> <div class="toggle-switch svelte-1cd4pz7"><input type="checkbox" id="dropdownModeToggle" class="svelte-1cd4pz7"/> <span class="toggle-slider svelte-1cd4pz7"></span></div> <div class="toggle-labels svelte-1cd4pz7"><span class="svelte-1cd4pz7">Jur‚ÜíSigner‚ÜíEntity</span> <span class="svelte-1cd4pz7">Jur‚ÜíEntity‚ÜíSigners</span></div></div> <div class="setting-group svelte-1cd4pz7"><label for="serverDelaySlider" class="svelte-1cd4pz7"><strong class="svelte-1cd4pz7">Server Processing Delay</strong> <br class="svelte-1cd4pz7"/><small class="svelte-1cd4pz7">Simulate network delay in consensus processing (0ms = instant)</small></label> <div class="slider-container svelte-1cd4pz7"><input type="range" id="serverDelaySlider" min="0" max="1000" class="svelte-1cd4pz7"/> <div class="slider-value svelte-1cd4pz7"><span class="svelte-1cd4pz7"> </span> ms</div></div></div></div></div></div>'),Is=I('<div class="admin-topbar svelte-1cd4pz7"><div class="admin-logo svelte-1cd4pz7"><span class="logo-text svelte-1cd4pz7">xln</span></div> <div class="admin-navigation svelte-1cd4pz7"></div> <div class="admin-controls svelte-1cd4pz7"><button class="admin-btn svelte-1cd4pz7" title="Run Demo"><span class="svelte-1cd4pz7">‚ñ∂Ô∏è</span></button> <button class="admin-btn svelte-1cd4pz7" title="Clear Database"><span class="svelte-1cd4pz7">üóëÔ∏è</span></button> <button class="admin-btn svelte-1cd4pz7" title="Create New Entity"><span class="svelte-1cd4pz7">‚ûï</span></button> <button class="admin-btn admin-btn-tutorial svelte-1cd4pz7" title="Start Interactive Tutorial"><span class="svelte-1cd4pz7">üéØ</span></button> <button class="admin-btn svelte-1cd4pz7" title="Add Entity Panel"><span class="svelte-1cd4pz7">üìã</span></button> <button class="admin-btn svelte-1cd4pz7" title="Toggle theme"><span id="theme-icon" class="svelte-1cd4pz7"> </span></button> <button class="admin-btn svelte-1cd4pz7" title="Settings"><span class="svelte-1cd4pz7">‚öôÔ∏è</span></button> <button class="admin-btn svelte-1cd4pz7" title="Toggle Dropdown Mode"><span class="svelte-1cd4pz7">üîÑ</span></button></div></div> <!>  <!> <!>',1);function $s(e,a){Fe(a,!1);const[s,l]=_t(),c=()=>Ae(De,"$settings",s),n=()=>Ae(Zt,"$isActiveTutorial",s),v=()=>Ae(St,"$currentTutorial",s),u=()=>Ae(ea,"$currentStep",s),h=oe();let k=oe(!1),g=oe(!1);async function d(){try{await dt.runDemo(),console.log("‚úÖ Demo completed successfully")}catch(N){console.error("‚ùå Demo failed:",N),alert(`Demo failed: ${N.message}`)}}async function x(){if(confirm("Are you sure you want to clear the database? This will reset all data."))try{await dt.clearDatabase(),console.log("‚úÖ Database cleared successfully")}catch(N){console.error("‚ùå Clear database failed:",N),alert(`Clear database failed: ${N.message}`)}}function _(){alert("Entity Creator coming soon! Use the Controls section in any panel for now.")}function f(){Q(g,!0)}function E(){Tt.toggleTheme()}function S(){Q(k,!0)}function z(){Q(k,!1)}function A(){Tt.toggleDropdownMode()}function X(){vt.addTab()}function $(N){const K=N.target;Tt.setServerDelay(parseInt(K.value))}Ie(()=>c(),()=>{Q(h,c().theme==="dark"?"üåô":"‚òÄÔ∏è")}),it(),He();var M=Is(),y=we(M),j=o(r(y),4),J=r(j),ee=o(J,2),q=o(ee,2),w=o(q,2),H=o(w,2),b=o(H,2),C=r(b),T=r(C,!0);i(C),i(b);var O=o(b,2),ue=o(O,2);i(j),i(y);var ne=o(y,2);{var te=N=>{var K=ks(),pe=r(K),_e=r(pe),Te=o(r(_e),2);i(_e);var ae=o(_e,2),R=r(ae),re=o(r(R),2),B=r(re);yt(B),qe(2),i(re),qe(2),i(R);var D=o(R,2),he=o(r(D),2),de=r(he);yt(de);var ve=o(de,2),le=r(ve),ce=r(le,!0);i(le),qe(),i(ve),i(he),i(D),i(ae),i(pe),i(K),se(()=>{ns(B,(c(),m(()=>c().dropdownMode==="entity-first"))),xa(de,(c(),m(()=>c().serverDelay))),L(ce,(c(),m(()=>c().serverDelay)))}),F("click",Te,z),F("change",B,A),F("input",de,$),F("click",pe,ds(function(fe){Ea.call(this,a,fe)})),F("click",K,z),p(N,K)};Z(ne,N=>{t(k)&&N(te)})}var G=o(ne,2);ws(G,{get isVisible(){return t(g)},set isVisible(N){Q(g,N)},$$legacy:!0});var P=o(G,2);{var Y=N=>{{let K=Ct(()=>[u()]);Es(N,{get isVisible(){return n()},currentStep:0,get totalSteps(){return v(),m(()=>v().steps.length)},get tutorialData(){return t(K)}})}};Z(P,N=>{n()&&v()&&u()&&N(Y)})}se(()=>L(T,t(h))),F("click",J,d),F("click",ee,x),F("click",q,_),F("click",w,f),F("click",H,X),F("click",b,E),F("click",O,S),F("click",ue,A),p(e,M),Oe(),l()}const Pe=Ye({currentTimeIndex:-1,maxTimeIndex:0,isLive:!0});tt(Pe,e=>e.currentTimeIndex);tt(Pe,e=>e.isLive);tt(Pe,e=>e.maxTimeIndex);const Ia=tt([Pe,gt,Xe],([e,a,s])=>{if(e.isLive)return s?.replicas||new Map;const l=e.currentTimeIndex;return l>=0&&l<a.length?a[l]?.replicas||new Map:new Map}),nt={updateMaxTimeIndex(){const e=W(gt),a=Math.max(0,e.length-1);Pe.update(s=>({...s,maxTimeIndex:a}))},goToTimeIndex(e){const a=W(Pe),s=Math.max(-1,Math.min(e,a.maxTimeIndex));Pe.set({currentTimeIndex:s,maxTimeIndex:a.maxTimeIndex,isLive:s===-1}),console.log("üï∞Ô∏è Time machine moved to index:",s),this.triggerEntityPanelUpdates()},goToLive(){this.goToTimeIndex(-1)},goToHistoryStart(){this.goToTimeIndex(0)},goToHistoryEnd(){const e=W(Pe);this.goToTimeIndex(e.maxTimeIndex)},stepBackward(){const e=W(Pe);e.isLive?this.goToTimeIndex(e.maxTimeIndex):this.goToTimeIndex(Math.max(0,e.currentTimeIndex-1))},stepForward(){const e=W(Pe);e.isLive||(e.currentTimeIndex<e.maxTimeIndex?this.goToTimeIndex(e.currentTimeIndex+1):this.goToLive())},getCurrentSnapshot(){const e=W(Pe);if(e.isLive)return null;const a=W(gt);return e.currentTimeIndex>=0&&e.currentTimeIndex<a.length?a[e.currentTimeIndex]:null},getTimeInfo(){const e=W(Pe),a=W(gt);return e.isLive?{status:"LIVE",description:"Current time",frameNumber:a.length,totalFrames:a.length}:{status:"HISTORICAL",description:this.getCurrentSnapshot()?.description||"Historical snapshot",frameNumber:e.currentTimeIndex+1,totalFrames:a.length}},triggerEntityPanelUpdates(){window.dispatchEvent(new CustomEvent("timeChanged",{detail:{timeIndex:W(Pe).currentTimeIndex}}))},initialize(){this.updateMaxTimeIndex(),gt.subscribe(()=>{this.updateMaxTimeIndex()})}};var Ns=I('<div class="time-machine svelte-jwfhjw"><div class="time-machine-main svelte-jwfhjw"><div><span> </span> <span> </span> <span> </span></div> <div class="time-nav-controls svelte-jwfhjw"><button class="time-btn-compact svelte-jwfhjw" title="Step Back (‚Üê arrow)">‚è™</button> <button class="time-btn-compact svelte-jwfhjw" title="Step Forward (‚Üí arrow)">‚è©</button> <button class="time-btn-compact live svelte-jwfhjw" title="Go to Current (End key)">‚ö° LIVE</button></div> <div class="time-utility-controls svelte-jwfhjw"><button class="time-btn-mini svelte-jwfhjw" title="Go to Start (Home key)">‚èÆÔ∏è</button></div></div> <div class="time-slider-container svelte-jwfhjw"><input type="range" class="time-slider svelte-jwfhjw" min="0"/></div></div>');function Ls(e,a){Fe(a,!1);const[s,l]=_t(),c=()=>Ae(Pe,"$timeState",s),n=()=>Ae(gt,"$history",s),v=()=>Ae(ps,"$currentHeight",s),u=oe(),h=oe(),k=oe();function g(P,Y){if(P.isLive)return{status:"‚ö° LIVE",description:"Current time",frameInfo:`Height: ${v()}`,totalFrames:`${Y.length} snapshots`};{const N=nt.getCurrentSnapshot();return{status:`üì∏ ${P.currentTimeIndex+1}/${Y.length}`,description:N?.description||"Historical snapshot",frameInfo:`Height: ${N?.height||0}`,totalFrames:N?.description||""}}}function d(P,Y){return P.isLive?P.maxTimeIndex+1:P.currentTimeIndex}function x(P,Y){if(P.isLive)return 100;const N=P.maxTimeIndex+1;return N>0?P.currentTimeIndex/N*100:0}function _(P){const Y=P.target,N=parseInt(Y.value),K=c().maxTimeIndex;N>K?nt.goToLive():nt.goToTimeIndex(N)}function f(){nt.stepBackward()}function E(){nt.stepForward()}function S(){nt.goToHistoryStart()}function z(){nt.goToLive()}function A(P){if(!(P.target&&P.target.tagName==="INPUT")&&!(P.target&&P.target.tagName==="TEXTAREA"))switch(P.key){case"ArrowLeft":P.preventDefault(),f();break;case"ArrowRight":P.preventDefault(),E();break;case"Home":P.preventDefault(),S();break;case"End":P.preventDefault(),z();break}}Ie(()=>(c(),n()),()=>{Q(u,g(c(),n()))}),Ie(()=>(c(),n()),()=>{Q(h,d(c(),n()))}),Ie(()=>(c(),n()),()=>{Q(k,x(c(),n()))}),it(),He();var X=Ns();F("keydown",ba,A);var $=r(X),M=r($);let y;var j=r(M),J=r(j,!0);i(j);var ee=o(j,2),q=r(ee,!0);i(ee);var w=o(ee,2),H=r(w,!0);i(w),i(M);var b=o(M,2),C=r(b),T=o(C,2),O=o(T,2);i(b);var ue=o(b,2),ne=r(ue);i(ue),i($);var te=o($,2),G=r(te);yt(G),i(te),i(X),se(P=>{y=ke(M,1,"time-info-compact svelte-jwfhjw",null,y,P),L(J,(t(u),m(()=>t(u).status))),L(q,(t(u),m(()=>t(u).frameInfo))),L(H,(t(u),m(()=>t(u).totalFrames))),aa(te,`--progress: ${t(k)??""}%`),Ke(G,"max",(c(),m(()=>c().maxTimeIndex+1))),xa(G,t(h)),G.disabled=(n(),m(()=>n().length===0))},[()=>({current:c().isLive})]),F("click",C,f),F("click",T,E),F("click",O,z),F("click",ne,S),F("input",G,_),p(e,X),Oe(),l()}var zs=I('<div><button class="unified-dropdown-btn svelte-199qdj" style="width: 100%;"><span class="dropdown-icon svelte-199qdj">üèõÔ∏è</span> <span class="dropdown-text svelte-199qdj"> </span> <span class="dropdown-arrow svelte-199qdj">‚ñº</span></button> <div></div></div>');function Cs(e,a){Fe(a,!1);const[s,l]=_t(),c=()=>Ae(De,"$settings",s),n=()=>Ae(ka,"$replicas",s),v=()=>Ae(Ia,"$visibleReplicas",s),u=oe();let h=Se(a,"tab",8);const k=ua();let g=oe(!1),d=oe();function x(b){return b.entityId&&b.signer&&b.jurisdiction?`${b.jurisdiction} ‚Üí ${b.signer} ‚Üí ${b.entityId.slice(-4)}`:b.signer&&b.jurisdiction?`${b.jurisdiction} ‚Üí ${b.signer} ‚Üí Select Entity`:b.jurisdiction?`${b.jurisdiction} ‚Üí Select Signer ‚Üí Entity`:"Select Jurisdiction ‚Üí Signer ‚Üí Entity"}function _(){Q(g,!t(g)),t(g)&&f()}function f(){if(!t(d))return;at(d,t(d).innerHTML=`
      <div class="dropdown-search-container">
        <input type="text" class="dropdown-search-input" placeholder="üîç Search jurisdictions, signers, entities..." />
      </div>
      <div class="dropdown-results" id="dropdownResults">
        <!-- Results will be populated here -->
      </div>
    `);const b=t(d).querySelector(".dropdown-search-input"),C=t(d).querySelector(".dropdown-results");b&&(b.addEventListener("input",T=>{const O=T.target;E(C,O.value)}),b.addEventListener("click",T=>{T.stopPropagation()})),E(C,"")}function E(b,C){if(!b)return;b.innerHTML="";const T=[{name:"Ethereum",id:"ethereum"},{name:"Polygon",id:"polygon"},{name:"Arbitrum",id:"arbitrum"}];c().dropdownMode==="signer-first"?S(T,b,C):z(T,b,C)}function S(b,C,T){b.forEach((O,ue)=>{const ne=Array.from(n().values()).filter(Y=>Y.state?.config?.jurisdiction?.name===O.name);if(ne.length===0)return;const te={};ne.forEach(Y=>{const N=Y.signerId;te[N]||(te[N]=[]),te[N].push(Y)});const G=A(`üèõÔ∏è ${O.name}`,"",0,!1,!1,T);C.appendChild(G);const P=Object.keys(te);P.forEach((Y,N)=>{const K=te[Y],pe=N===P.length-1,_e=A(`üë§ ${Y}`,"",1,!1,pe,T);C.appendChild(_e),K.forEach((Te,ae)=>{const R=ae===K.length-1,re=Te.entityId.slice(-4),B=A(`üè¢ ${re}`,`${O.name}:${Y}:${Te.entityId}`,2,!0,R&&pe,T);B.addEventListener("click",()=>$(O.name,Y,Te.entityId)),C.appendChild(B)})})})}function z(b,C,T){b.forEach((O,ue)=>{const ne=v()||n(),te=Array.from(ne.values()).filter(N=>N.state?.config?.jurisdiction?.name===O.name);if(te.length===0)return;const G={};te.forEach(N=>{const K=N.entityId;G[K]||(G[K]=[]),G[K].push(N)});const P=A(`üèõÔ∏è ${O.name}`,"",0,!1,!1,T);C.appendChild(P);const Y=Object.keys(G);Y.forEach((N,K)=>{const pe=G[N],_e=K===Y.length-1,Te=N.slice(-4),ae=A(`üè¢ ${Te} (${pe.length} signers)`,"",1,!1,_e,T);C.appendChild(ae),pe.forEach((R,re)=>{const B=re===pe.length-1,D=A(`üë§ ${R.signerId}`,`${O.name}:${R.signerId}:${R.entityId}`,2,!0,B&&_e,T);D.addEventListener("click",()=>$(O.name,R.signerId,R.entityId)),C.appendChild(D)})})})}function A(b,C,T,O,ue,ne){const te=document.createElement("div");te.className=`dropdown-item ${T>0?`indent-${T}`:""}`;let G="";return T===1?G="‚îú‚îÄ ":T===2&&(G="‚îÇ  ‚îî‚îÄ "),te.innerHTML=`
      <span class="tree-prefix" style="color: #666; font-family: monospace;">${G}</span>
      <span class="item-text">${b}</span>
    `,O?(te.style.cursor="pointer",te.dataset.value=C):(te.style.cursor="default",te.style.color="#9d9d9d"),ne&&b.toLowerCase().includes(ne.toLowerCase())&&X(te,ne),te}function X(b,C){const T=b.querySelector(".item-text");if(T&&C){const O=T.textContent||"",ue=new RegExp(`(${C})`,"gi");T.innerHTML=O.replace(ue,'<mark style="background: #ffd700; color: #000; padding: 2px;">$1</mark>')}}function $(b,C,T){k("entitySelect",{jurisdiction:b,signer:C,entityId:T}),Q(g,!1)}function M(b){b.target.closest(".unified-dropdown")||Q(g,!1)}Ie(()=>ge(h()),()=>{Q(u,x(h()))}),it(),He();var y=zs();F("click",ba,M);let j;var J=r(y),ee=o(r(J),2),q=r(ee,!0);i(ee),qe(2),i(J);var w=o(J,2);let H;wa(w,b=>Q(d,b),()=>t(d)),i(y),se((b,C)=>{j=ke(y,1,"unified-dropdown svelte-199qdj",null,j,b),L(q,t(u)),H=ke(w,1,"unified-dropdown-content svelte-199qdj",null,H,C)},[()=>({open:t(g)}),()=>({show:t(g)})]),F("click",J,_),p(e,y),Oe(),l()}var As=I('<div class="entity-profile svelte-18sk6vh"><div class="profile-info svelte-18sk6vh"><div class="profile-name svelte-18sk6vh"> </div> <div class="profile-details svelte-18sk6vh"> </div></div></div>'),js=I('<div class="empty-state svelte-18sk6vh">- select entity to view profile</div>'),Ds=I('<div class="entity-profile-section svelte-18sk6vh"><!></div>');function Ms(e,a){Fe(a,!1);let s=Se(a,"replica",8);Se(a,"tab",8),He();var l=Ds(),c=r(l);{var n=u=>{var h=As(),k=r(h),g=r(k),d=r(g);i(g);var x=o(g,2),_=r(x);i(x),i(k),i(h),se(f=>{L(d,`Entity ${f??""}`),L(_,`Signer: ${ge(s()),m(()=>s().signerId)??""}`)},[()=>(ge(s()),m(()=>s().entityId.slice(-4)))]),p(u,h)},v=u=>{var h=js();p(u,h)};Z(c,u=>{s()?u(n):u(v,!1)})}i(l),p(e,l),Oe()}var Xs=I('<div class="consensus-item svelte-1udnq54"><span class="consensus-label svelte-1udnq54">Status:</span> <span class="consensus-value consensus-status-unlocked svelte-1udnq54">üîì Unlocked</span></div> <div class="consensus-item svelte-1udnq54"><span class="consensus-label svelte-1udnq54">Role:</span> <span class="consensus-value svelte-1udnq54">üëÅÔ∏è Validator</span></div> <div class="consensus-item svelte-1udnq54"><span class="consensus-label svelte-1udnq54">Frame Height:</span> <span class="consensus-value svelte-1udnq54"> </span></div> <div class="consensus-item svelte-1udnq54"><span class="consensus-label svelte-1udnq54">Messages:</span> <span class="consensus-value svelte-1udnq54"> </span></div> <div class="consensus-item svelte-1udnq54"><span class="consensus-label svelte-1udnq54">Proposals:</span> <span class="consensus-value svelte-1udnq54"> </span></div>',1),Ps=I('<div class="empty-state svelte-1udnq54">- select entity to view consensus state</div>'),qs=I('<div class="consensus-state svelte-1udnq54"><!></div>');function Hs(e,a){Fe(a,!1);let s=Se(a,"replica",8);He();var l=qs(),c=r(l);{var n=u=>{var h=Xs(),k=o(we(h),4),g=o(r(k),2),d=r(g,!0);i(g),i(k);var x=o(k,2),_=o(r(x),2),f=r(_,!0);i(_),i(x);var E=o(x,2),S=o(r(E),2),z=r(S,!0);i(S),i(E),se(()=>{L(d,(ge(s()),m(()=>s().state?.height||0))),L(f,(ge(s()),m(()=>s().state?.messages?.length||0))),L(z,(ge(s()),m(()=>s().state?.proposals?.size||0)))}),p(u,h)},v=u=>{var h=Ps();p(u,h)};Z(c,u=>{s()?u(n):u(v,!1)})}i(l),p(e,l),Oe()}var Fs=I('<div class="chat-message svelte-4w744y"><div class="chat-meta svelte-4w744y"> </div> <div class="chat-content svelte-4w744y"> </div></div>'),Os=I('<div class="empty-state svelte-4w744y">- no messages</div>'),Rs=I('<div class="scrollable-component svelte-4w744y"><!></div>');function Us(e,a){Fe(a,!1);let s=Se(a,"replica",8);Se(a,"tab",8),He();var l=Rs(),c=r(l);{var n=u=>{var h=je(),k=we(h);We(k,1,()=>(ge(s()),m(()=>s().state.messages)),Ge,(g,d,x)=>{var _=Fs(),f=r(_),E=r(f);i(f);var S=o(f,2),z=r(S,!0);i(S),i(_),se(()=>{L(E,`Message #${x+1} ‚Ä¢ ${ge(s()),m(()=>s().signerId)??""}`),L(z,t(d))}),p(g,_)}),p(u,h)},v=u=>{var h=Os();p(u,h)};Z(c,u=>{ge(s()),m(()=>s()&&s().state?.messages?.length>0)?u(n):u(v,!1)})}i(l),p(e,l),Oe()}var Vs=I('<div class="proposal-item svelte-1kjjzq"><div class="proposal-title svelte-1kjjzq"> </div> <div class="proposal-meta svelte-1kjjzq"><span> </span></div></div>'),Js=I('<div class="empty-state svelte-1kjjzq">- no proposals</div>'),Bs=I('<div class="scrollable-component svelte-1kjjzq"><!></div>');function Ws(e,a){Fe(a,!1);let s=Se(a,"replica",8);Se(a,"tab",8),He();var l=Bs(),c=r(l);{var n=u=>{var h=je(),k=we(h);We(k,1,()=>(ge(s()),m(()=>Array.from(s().state.proposals.entries()))),Ge,(g,d)=>{var x=Za(()=>es(t(d),2));let _=()=>t(x)[1];var f=Vs(),E=r(f),S=r(E,!0);i(E);var z=o(E,2),A=r(z),X=r(A);i(A),i(z),i(f),se(()=>{L(S,(_(),m(()=>_().action?.data?.message||"Unknown proposal"))),L(X,`By: ${_(),m(()=>_().proposer||"Unknown")??""}`)}),p(g,f)}),p(u,h)},v=u=>{var h=Js();p(u,h)};Z(c,u=>{ge(s()),m(()=>s()&&s().state?.proposals?.size>0)?u(n):u(v,!1)})}i(l),p(e,l),Oe()}var Gs=I("<span>üí¨</span>"),Ys=I("<span>üó≥Ô∏è</span>"),Ks=I("<span>‚öôÔ∏è</span>"),Qs=I("<p><strong> </strong> </p>"),Zs=I("<p> </p>"),en=I('<div class="history-item svelte-193j56j"><div class="item-icon svelte-193j56j"><!></div> <div class="item-details svelte-193j56j"><div class="item-header svelte-193j56j"><span class="item-type svelte-193j56j"> </span> <span class="item-timestamp svelte-193j56j"> </span></div> <div class="item-content svelte-193j56j"><!></div></div></div>'),tn=I('<div class="history-list svelte-193j56j"></div>'),an=I('<p class="no-history svelte-193j56j">No history available.</p>'),sn=I('<div class="transaction-history svelte-193j56j"><!></div>');function nn(e,a){Fe(a,!1);let s=Se(a,"replica",8);Se(a,"tab",8),He();var l=sn(),c=r(l);{var n=u=>{var h=tn();We(h,5,()=>(ge(s()),m(()=>s().state.messages)),Ge,(k,g)=>{var d=en(),x=r(d),_=r(x);{var f=q=>{var w=Gs();p(q,w)},E=q=>{var w=je(),H=we(w);{var b=T=>{var O=Ys();p(T,O)},C=T=>{var O=Ks();p(T,O)};Z(H,T=>{t(g),m(()=>t(g).type==="proposal")?T(b):T(C,!1)},!0)}p(q,w)};Z(_,q=>{t(g),m(()=>t(g).type==="chat")?q(f):q(E,!1)})}i(x);var S=o(x,2),z=r(S),A=r(z),X=r(A,!0);i(A);var $=o(A,2),M=r($,!0);i($),i(z);var y=o(z,2),j=r(y);{var J=q=>{var w=Qs(),H=r(w),b=r(H);i(H);var C=o(H);i(w),se(()=>{L(b,`${t(g),m(()=>t(g).data.from)??""}:`),L(C,` ${t(g),m(()=>t(g).data.message)??""}`)}),p(q,w)},ee=q=>{var w=je(),H=we(w);{var b=C=>{var T=Zs(),O=r(T);i(T),se(()=>L(O,`Proposal to "${t(g),m(()=>t(g).data.action.data.message)??""}"`)),p(C,T)};Z(H,C=>{t(g),m(()=>t(g).type==="proposal")&&C(b)},!0)}p(q,w)};Z(j,q=>{t(g),m(()=>t(g).type==="chat")?q(J):q(ee,!1)})}i(y),i(S),i(d),se(q=>{L(X,(t(g),m(()=>t(g).type))),L(M,q)},[()=>(t(g),m(()=>new Date(t(g).timestamp).toLocaleTimeString()))]),p(k,d)}),i(h),p(u,h)},v=u=>{var h=an();p(u,h)};Z(c,u=>{s()?u(n):u(v,!1)})}i(l),p(e,l),Oe()}var rn=I('<div class="form-group svelte-mrxla2"><label class="form-label svelte-mrxla2">Message:</label> <textarea class="form-textarea svelte-mrxla2" placeholder="Enter your message..."></textarea></div> <button class="form-button svelte-mrxla2">Send Message</button>',1),on=I('<div class="form-group svelte-mrxla2"><label class="form-label svelte-mrxla2">Action:</label> <div class="form-input svelte-mrxla2" style="padding: 12px; background: #1e1e1e; border-radius: 4px; color: #666;"> </div></div>'),ln=I('<div class="controls-section svelte-mrxla2"><select class="controls-dropdown svelte-mrxla2"><option selected>üí¨ Create chat message</option><option>üìã Add proposal</option><option>üó≥Ô∏è Vote on proposal</option><option>üèõÔ∏è Form new entity</option><option>üí∏ Send J-tx</option><option>‚öôÔ∏è Update settings</option></select> <div class="controls-form svelte-mrxla2"><!></div></div>');function cn(e,a){Se(a,"replica",8),Se(a,"tab",8);let s=oe("chat"),l=oe("");var c=ln(),n=r(c);se(()=>{t(s),ct(()=>{})});var v=r(n);v.value=v.__value="chat";var u=o(v);u.value=u.__value="proposal";var h=o(u);h.value=h.__value="vote";var k=o(h);k.value=k.__value="entity";var g=o(k);g.value=g.__value="jtx";var d=o(g);d.value=d.__value="settings",i(n);var x=o(n,2),_=r(x);{var f=S=>{var z=rn(),A=we(z),X=o(r(A),2);ts(X),i(A),qe(2),$t(X,()=>t(l),$=>Q(l,$)),p(S,z)},E=S=>{var z=on(),A=o(r(z),2),X=r(A);i(A),i(z),se(()=>L(X,`${t(s)??""} controls will be implemented here`)),p(S,z)};Z(_,S=>{t(s)==="chat"?S(f):S(E,!1)})}i(x),i(c),wt(n,()=>t(s),S=>Q(s,S)),p(e,c)}var vn=I('<button class="panel-add-btn svelte-11c9zfd" title="Add Entity Panel">‚ûï</button>'),dn=I('<button class="panel-close-btn svelte-11c9zfd" title="Close panel">√ó</button>'),un=I('<div class="entity-panel svelte-11c9zfd"><div class="panel-header svelte-11c9zfd"><!> <div class="panel-header-controls svelte-11c9zfd"><!> <!></div></div> <!> <div class="panel-component svelte-11c9zfd"><div role="button" tabindex="0"><div class="component-title svelte-11c9zfd"><span>‚öñÔ∏è</span> <span>Consensus State</span></div> <div class="component-toggle svelte-11c9zfd">‚ñº</div></div> <div style="max-height: 200px;"><!></div></div> <div class="panel-component svelte-11c9zfd"><div role="button" tabindex="0"><div class="component-title svelte-11c9zfd"><span>üí¨</span> <span>Chat</span></div> <div class="component-toggle svelte-11c9zfd">‚ñº</div></div> <div style="max-height: 25vh;"><!></div></div> <div class="panel-component svelte-11c9zfd"><div role="button" tabindex="0"><div class="component-title svelte-11c9zfd"><span>üìã</span> <span>Proposals</span></div> <div class="component-toggle svelte-11c9zfd">‚ñº</div></div> <div style="max-height: 25vh;"><!></div></div> <div class="panel-component entity-history-panel svelte-11c9zfd"><div role="button" tabindex="0"><div class="component-title svelte-11c9zfd"><span>üóÇÔ∏è</span> <span>History</span></div> <div class="component-toggle svelte-11c9zfd">‚ñº</div></div> <div style="max-height: 40vh;"><!></div></div> <div class="panel-component svelte-11c9zfd"><div role="button" tabindex="0"><div class="component-title svelte-11c9zfd"><span>‚öôÔ∏è</span> <span>Controls</span></div> <div class="component-toggle svelte-11c9zfd">‚ñº</div></div> <div style="max-height: 400px;"><!></div></div></div>');function pn(e,a){Fe(a,!1);const[s,l]=_t(),c=()=>Ae(Ia,"$visibleReplicas",s),n=()=>Ae(De,"$settings",s),v=oe(),u=oe(),h=oe(),k=oe(),g=oe();let d=Se(a,"tab",8),x=Se(a,"isLast",8,!1),_=oe(null);function f(U){Tt.toggleComponentState(U)}function E(U){const{jurisdiction:me,signer:ze,entityId:$e}=U.detail;vt.updateTab(d().id,{jurisdiction:me,signer:ze,entityId:$e,title:`Entity ${$e.slice(-4)}`})}function S(){vt.closeTab(d().id)}function z(){vt.addTab()}zt(()=>{vt.getActiveTab();const U=me=>{console.log("üï∞Ô∏è EntityPanel received time change event:",me.detail.timeIndex),d().entityId&&d().signer&&console.log(`üîÑ Panel ${d().id} updating for time index:`,me.detail.timeIndex)};return window.addEventListener("timeChanged",U),()=>{window.removeEventListener("timeChanged",U)}}),Ie(()=>(ge(d()),c(),dt),()=>{if(d().entityId&&d().signer){const U=c()?.get?.(`${d().entityId}:${d().signer}`);Q(_,U||dt.getReplica(d().entityId,d().signer))}else Q(_,null)}),Ie(()=>(n(),ge(d())),()=>{Q(v,n().componentStates[`consensus-${d().id}`]??!0)}),Ie(()=>(n(),ge(d())),()=>{Q(u,n().componentStates[`chat-${d().id}`]??!0)}),Ie(()=>(n(),ge(d())),()=>{Q(h,n().componentStates[`proposals-${d().id}`]??!1)}),Ie(()=>(n(),ge(d())),()=>{Q(k,n().componentStates[`history-${d().id}`]??!1)}),Ie(()=>(n(),ge(d())),()=>{Q(g,n().componentStates[`controls-${d().id}`]??!1)}),it(),He();var A=un(),X=r(A),$=r(X);Cs($,{get tab(){return d()},$$events:{entitySelect:E}});var M=o($,2),y=r(M);{var j=U=>{var me=vn();F("click",me,z),p(U,me)};Z(y,U=>{x()&&U(j)})}var J=o(y,2);{var ee=U=>{var me=dn();F("click",me,S),p(U,me)};Z(J,U=>{U(ee)})}i(M),i(X);var q=o(X,2);Ms(q,{get replica(){return t(_)},get tab(){return d()}});var w=o(q,2),H=r(w);let b;var C=o(H,2);let T;var O=r(C);Hs(O,{get replica(){return t(_)}}),i(C),i(w);var ue=o(w,2),ne=r(ue);let te;var G=o(ne,2);let P;var Y=r(G);Us(Y,{get replica(){return t(_)},get tab(){return d()}}),i(G),i(ue);var N=o(ue,2),K=r(N);let pe;var _e=o(K,2);let Te;var ae=r(_e);Ws(ae,{get replica(){return t(_)},get tab(){return d()}}),i(_e),i(N);var R=o(N,2),re=r(R);let B;var D=o(re,2);let he;var de=r(D);nn(de,{get replica(){return t(_)},get tab(){return d()}}),i(D),i(R);var ve=o(R,2),le=r(ve);let ce;var fe=o(le,2);let ye;var be=r(fe);cn(be,{get replica(){return t(_)},get tab(){return d()}}),i(fe),i(ve),i(A),se((U,me,ze,$e,Ne,Ue,st,ut,rt,Dt)=>{Ke(A,"data-panel-id",(ge(d()),m(()=>d().id))),Ke(w,"id",`consensus-${ge(d()),m(()=>d().id)??""}`),b=ke(H,1,"component-header svelte-11c9zfd",null,b,U),T=ke(C,1,"component-content svelte-11c9zfd",null,T,me),Ke(ue,"id",`chat-${ge(d()),m(()=>d().id)??""}`),te=ke(ne,1,"component-header svelte-11c9zfd",null,te,ze),P=ke(G,1,"component-content svelte-11c9zfd",null,P,$e),Ke(N,"id",`proposals-${ge(d()),m(()=>d().id)??""}`),pe=ke(K,1,"component-header svelte-11c9zfd",null,pe,Ne),Te=ke(_e,1,"component-content svelte-11c9zfd",null,Te,Ue),Ke(R,"id",`history-${ge(d()),m(()=>d().id)??""}`),B=ke(re,1,"component-header svelte-11c9zfd",null,B,st),he=ke(D,1,"component-content svelte-11c9zfd",null,he,ut),Ke(ve,"id",`controls-${ge(d()),m(()=>d().id)??""}`),ce=ke(le,1,"component-header svelte-11c9zfd",null,ce,rt),ye=ke(fe,1,"component-content svelte-11c9zfd",null,ye,Dt)},[()=>({collapsed:!t(v)}),()=>({collapsed:!t(v)}),()=>({collapsed:!t(u)}),()=>({collapsed:!t(u)}),()=>({collapsed:!t(h)}),()=>({collapsed:!t(h)}),()=>({collapsed:!t(k)}),()=>({collapsed:!t(k)}),()=>({collapsed:!t(g)}),()=>({collapsed:!t(g)})]),F("click",H,()=>f(`consensus-${d().id}`)),F("keydown",H,U=>U.key==="Enter"&&f(`consensus-${d().id}`)),F("click",ne,()=>f(`chat-${d().id}`)),F("keydown",ne,U=>U.key==="Enter"&&f(`chat-${d().id}`)),F("click",K,()=>f(`proposals-${d().id}`)),F("keydown",K,U=>U.key==="Enter"&&f(`proposals-${d().id}`)),F("click",re,()=>f(`history-${d().id}`)),F("keydown",re,U=>U.key==="Enter"&&f(`history-${d().id}`)),F("click",le,()=>f(`controls-${d().id}`)),F("keydown",le,U=>U.key==="Enter"&&f(`controls-${d().id}`)),p(e,A),Oe(),l()}var fn=I('<div class="input-item svelte-1fv6y8l"><strong> </strong> </div>'),mn=I('<div class="no-inputs svelte-1fv6y8l">No server transactions</div>'),hn=I("<br/> ",1),gn=I("<br/>üìù <strong> </strong> <!>",1),yn=I('<div class="input-item svelte-1fv6y8l"><strong> </strong> <!></div>'),_n=I('<div class="no-inputs svelte-1fv6y8l">No entity inputs</div>'),bn=I("<br/> ",1),wn=I("<br/>üìù <strong> </strong> <!>",1),xn=I('<div class="input-item svelte-1fv6y8l"><strong> </strong> <!></div>'),Tn=I('<div class="no-inputs svelte-1fv6y8l">No entity outputs</div>'),Sn=I(`<div class="history-content svelte-1fv6y8l"><div class="server-io-container svelte-1fv6y8l"><div class="server-column svelte-1fv6y8l"><div class="server-column-header svelte-1fv6y8l">üì® Server Input (What's happening this tick) <span class="status-indicator svelte-1fv6y8l"> </span></div> <div class="server-section svelte-1fv6y8l"><h4 class="svelte-1fv6y8l">üñ•Ô∏è Server Transactions</h4> <div class="server-txs-list"><!></div></div> <div class="server-section svelte-1fv6y8l"><h4 class="svelte-1fv6y8l">üîÑ Entity Inputs</h4> <div class="entity-inputs-list"><!></div></div></div> <div class="server-column svelte-1fv6y8l"><div class="server-column-header svelte-1fv6y8l">üì§ Server Output (What's being sent and where) <span class="status-indicator svelte-1fv6y8l"> </span></div> <div class="server-section svelte-1fv6y8l"><h4 class="svelte-1fv6y8l">üöÄ Entity Outputs</h4> <div class="entity-outputs-list"><!></div></div></div></div></div>`),En=I('<div class="history-io-section svelte-1fv6y8l"><div class="history-header svelte-1fv6y8l"><h3 class="svelte-1fv6y8l">üìä Transaction History & I/O</h3> <button> </button></div> <!></div>');function kn(e,a){Fe(a,!1);const[s,l]=_t(),c=()=>Ae(Pe,"$timeState",s),n=()=>Ae(Xe,"$xlnEnvironment",s),v=oe(),u=oe(),h=oe();let k=oe(!1);function g(){Q(k,!t(k))}Ie(()=>(c(),n()),()=>{Q(v,c().isLive?null:n()?.history?.[c().currentTimeIndex])}),Ie(()=>t(v),()=>{Q(u,t(v)?.serverInput||{serverTxs:[],entityInputs:[]})}),Ie(()=>t(v),()=>{Q(h,t(v)?.serverOutputs||[])}),it(),He();var d=En(),x=r(d),_=o(r(x),2);let f;var E=r(_,!0);i(_),i(x);var S=o(x,2);{var z=A=>{var X=Sn(),$=r(X),M=r($),y=r(M),j=o(r(y)),J=r(j,!0);i(j),i(y);var ee=o(y,2),q=o(r(ee),2),w=r(q);{var H=ae=>{var R=je(),re=we(R);We(re,1,()=>(t(u),m(()=>t(u).serverTxs)),Ge,(B,D)=>{var he=fn(),de=r(he),ve=r(de);i(de);var le=o(de);i(he),se(()=>{L(ve,`üñ•Ô∏è ${t(D),m(()=>t(D).type)??""}`),L(le,`: ${t(D),m(()=>t(D).entityId)??""}:${t(D),m(()=>t(D).signerId)??""}
                    ${t(D),m(()=>t(D).data.isProposer?" (üëë Proposer)":" (‚úÖ Validator)")??""}`)}),p(B,he)}),p(ae,R)},b=ae=>{var R=mn();p(ae,R)};Z(w,ae=>{t(u),m(()=>t(u).serverTxs.length>0)?ae(H):ae(b,!1)})}i(q),i(ee);var C=o(ee,2),T=o(r(C),2),O=r(T);{var ue=ae=>{var R=je(),re=we(R);We(re,1,()=>(t(u),m(()=>t(u).entityInputs)),Ge,(B,D)=>{var he=yn(),de=r(he),ve=r(de);i(de);var le=o(de,2);{var ce=fe=>{var ye=gn(),be=o(we(ye),2),U=r(be);i(be);var me=o(be,2);We(me,1,()=>(t(D),m(()=>t(D).entityTxs)),Ge,(ze,$e,Ne)=>{var Ue=hn(),st=o(we(Ue));se(()=>L(st,` ${Ne+1}. ${t($e),m(()=>t($e).type==="chat"?`üí¨ Chat: "${t($e).data.message}"`:t($e).type==="propose"?`üìù Propose: "${t($e).data.action.data.message}"`:t($e).type==="vote"?`üó≥Ô∏è Vote: ${t($e).data.choice}`:`‚öôÔ∏è ${t($e).type}`)??""}`)),p(ze,Ue)}),se(()=>L(U,`${t(D),m(()=>t(D).entityTxs.length)??""} transactions:`)),p(fe,ye)};Z(le,fe=>{t(D),m(()=>t(D).entityTxs&&t(D).entityTxs.length>0)&&fe(ce)})}i(he),se(()=>L(ve,`${t(D),m(()=>t(D).entityId)??""}:${t(D),m(()=>t(D).signerId)??""}`)),p(B,he)}),p(ae,R)},ne=ae=>{var R=_n();p(ae,R)};Z(O,ae=>{t(u),m(()=>t(u).entityInputs.length>0)?ae(ue):ae(ne,!1)})}i(T),i(C),i(M);var te=o(M,2),G=r(te),P=o(r(G)),Y=r(P,!0);i(P),i(G);var N=o(G,2),K=o(r(N),2),pe=r(K);{var _e=ae=>{var R=je(),re=we(R);We(re,1,()=>t(h),Ge,(B,D,he)=>{var de=xn(),ve=r(de),le=r(ve);i(ve);var ce=o(ve,2);{var fe=ye=>{var be=wn(),U=o(we(be),2),me=r(U);i(U);var ze=o(U,2);We(ze,1,()=>(t(D),m(()=>t(D).entityTxs)),Ge,($e,Ne,Ue)=>{var st=bn(),ut=o(we(st));se(()=>L(ut,` ${Ue+1}. ${t(Ne),m(()=>t(Ne).type==="chat"?`üí¨ Chat: "${t(Ne).data.message}"`:t(Ne).type==="propose"?`üìù Propose: "${t(Ne).data.action.data.message}"`:t(Ne).type==="vote"?`üó≥Ô∏è Vote: ${t(Ne).data.choice}`:`‚öôÔ∏è ${t(Ne).type}`)??""}`)),p($e,st)}),se(()=>L(me,`${t(D),m(()=>t(D).entityTxs.length)??""} transactions:`)),p(ye,be)};Z(ce,ye=>{t(D),m(()=>t(D).entityTxs&&t(D).entityTxs.length>0)&&ye(fe)})}i(de),se(()=>L(le,`üì§ ${he+1}. ‚Üí ${t(D),m(()=>t(D).signerId)??""}`)),p(B,de)}),p(ae,R)},Te=ae=>{var R=Tn();p(ae,R)};Z(pe,ae=>{t(h),m(()=>t(h).length>0)?ae(_e):ae(Te,!1)})}i(K),i(N),i(te),i($),i(X),se(()=>{L(J,(c(),m(()=>c().isLive?"‚ö° Current":"üï∞Ô∏è Historical"))),L(Y,(c(),m(()=>c().isLive?"‚ö° Current":"üï∞Ô∏è Historical")))}),p(A,X)};Z(S,A=>{t(k)||A(z)})}i(d),se(A=>{f=ke(_,1,"collapse-btn svelte-1fv6y8l",null,f,A),L(E,t(k)?"‚ñ∂":"‚ñº")},[()=>({collapsed:t(k)})]),F("click",_,g),p(e,d),Oe(),l()}var In=I("<button><!></button>");function Bt(e,a){let s=Se(a,"variant",8,"primary"),l=Se(a,"size",8,"medium"),c=Se(a,"disabled",8,!1),n=Se(a,"type",8,"button");var v=In(),u=r(v);os(u,a,"default",{}),i(v),se(()=>{ke(v,1,`btn btn-${s()??""} btn-${l()??""}`,"svelte-1ygej4b"),v.disabled=c(),Ke(v,"type",n())}),F("click",v,function(h){Ea.call(this,a,h)}),p(e,v)}var $n=I("<strong>üîí Lazy:</strong> Free to create, entityId = hash(validators), works immediately.",1),Nn=I("<strong>üî¢ Numbered:</strong> Small gas cost, get sequential number like #42, on-chain registered.",1),Ln=I('<strong>üè∑Ô∏è Named:</strong> Premium gas + admin approval, get custom name like "coinbase".',1),zn=I('<button type="button" class="btn btn-danger btn-small svelte-mp6wtl">‚ùå</button>'),Cn=I('<div class="validator-row svelte-mp6wtl"><select class="validator-name svelte-mp6wtl"><option>Select signer...</option><option>alice.eth</option><option>bob.eth</option><option>carol.eth</option><option>david.eth</option><option>eve.eth</option></select> <input type="number" class="validator-weight svelte-mp6wtl" min="1" placeholder="1"/> <!></div>'),An=I('<div class="quorum-hash-section svelte-mp6wtl"><h4 class="svelte-mp6wtl">üîê Quorum Hash</h4> <div class="hash-display svelte-mp6wtl"><code class="svelte-mp6wtl"> </code></div> <small class="svelte-mp6wtl">This hash is calculated from your validators and threshold. It will be your entity ID.</small></div>'),jn=I('<div class="error-message svelte-mp6wtl"> </div>'),Dn=I('<div class="entity-formation svelte-mp6wtl"><div class="formation-panel svelte-mp6wtl"><div class="formation-group svelte-mp6wtl"><label for="jurisdictionSelect" class="svelte-mp6wtl">üèõÔ∏è Jurisdiction:</label> <select id="jurisdictionSelect" class="svelte-mp6wtl"><option>Ethereum Mainnet (Port 8545)</option><option>Polygon Network (Port 8546)</option><option>Arbitrum One (Port 8547)</option></select> <div class="jurisdiction-info svelte-mp6wtl"><small class="svelte-mp6wtl"><strong>üì° Network:</strong> <br/> <strong>üîó RPC Port:</strong> </small></div></div> <div class="formation-group svelte-mp6wtl"><label for="entityTypeSelect" class="svelte-mp6wtl">üÜî Entity Type:</label> <select id="entityTypeSelect" class="svelte-mp6wtl"><option>üîí Lazy Entity (Free - ID = Quorum Hash)</option><option>üî¢ Numbered Entity (Gas Required - Sequential ID)</option><option>üè∑Ô∏è Named Entity (Premium Gas + Admin Approval)</option></select> <div class="entity-type-info svelte-mp6wtl"><small class="svelte-mp6wtl"><!></small></div></div> <div class="formation-group svelte-mp6wtl"><label for="entityNameInput" class="svelte-mp6wtl">üè∑Ô∏è Entity Name:</label> <input type="text" id="entityNameInput" placeholder="e.g., trading, chat, governance" class="svelte-mp6wtl"/> <small class="svelte-mp6wtl">Display name for your entity</small></div> <div class="validators-section svelte-mp6wtl"><h4 class="svelte-mp6wtl">üë• Validators:</h4> <div class="validators-list svelte-mp6wtl"></div> <button type="button" class="btn btn-secondary svelte-mp6wtl">‚ûï Add Validator</button> <small class="svelte-mp6wtl">üí° Start with a single signer for personal use, or add more for multisig/corporate entities</small></div> <div class="threshold-section svelte-mp6wtl"><label for="thresholdSlider" class="svelte-mp6wtl"> </label> <input type="range" id="thresholdSlider" min="1" class="threshold-slider svelte-mp6wtl"/> <div class="threshold-info svelte-mp6wtl"><span>Total Weight: <strong class="svelte-mp6wtl"> </strong></span> <span>Required: <strong class="svelte-mp6wtl"> </strong></span></div></div> <!> <div class="expected-id-section svelte-mp6wtl"><h4 class="svelte-mp6wtl">üÜî Expected Entity ID</h4> <div class="id-display svelte-mp6wtl"><code class="svelte-mp6wtl"> </code></div> <small class="svelte-mp6wtl"><!></small></div> <!> <div class="button-group svelte-mp6wtl"><button class="btn btn-primary svelte-mp6wtl"> </button> <button class="btn btn-secondary svelte-mp6wtl">üóëÔ∏è Clear Form</button></div></div></div>');function Mn(e,a){Fe(a,!1);const s=oe(),l=oe(),c=oe();let n=oe({jurisdiction:"8545",entityType:"lazy",entityName:"ACME",validators:[{name:"alice",weight:1}],threshold:1}),v=oe(!1),u=oe("");function h(){at(n,t(n).validators=[...t(n).validators,{name:"",weight:1}])}function k(V){t(n).validators.length>1&&at(n,t(n).validators=t(n).validators.filter((ie,Ce)=>Ce!==V))}function g(){const V=t(n).validators.reduce((ie,Ce)=>ie+Ce.weight,0);t(n).threshold>V&&at(n,t(n).threshold=V)}async function d(){if(!t(v)){Q(u,""),Q(v,!0);try{if(!t(n).entityName.trim())throw new Error("Entity name is required");if(t(n).validators.some(ie=>!ie.name.trim()))throw new Error("All validators must have names");const V=t(n).validators.reduce((ie,Ce)=>ie+Ce.weight,0);if(t(n).threshold>V)throw new Error("Threshold cannot exceed total weight");await dt.createEntity({entityType:t(n).entityType,entityName:t(n).entityName,validators:t(n).validators.map(ie=>ie.name),threshold:t(n).threshold,jurisdiction:t(n).jurisdiction}),x()}catch(V){Q(u,V instanceof Error?V.message:"Failed to create entity")}finally{Q(v,!1)}}}function x(){Q(n,{jurisdiction:"8545",entityType:"lazy",entityName:"ACME",validators:[{name:"alice",weight:1}],threshold:1}),Q(u,"")}function _(V,ie){const Ve=`${V.map(xe=>`${xe.name}:${xe.weight}`).sort().join(",")}|${ie}`;let Le=0;for(let xe=0;xe<Ve.length;xe++){const Je=Ve.charCodeAt(xe);Le=(Le<<5)-Le+Je,Le=Le&Le}return Math.abs(Le).toString(16).padStart(8,"0")}function f(V,ie){return V==="lazy"?`0x${ie}`:V==="numbered"?"#42":"custom-name"}Ie(()=>t(n),()=>{Q(s,t(n).validators.reduce((V,ie)=>V+ie.weight,0))}),Ie(()=>(t(n),t(s)),()=>{t(n).threshold>t(s)&&at(n,t(n).threshold=t(s))}),Ie(()=>t(n),()=>{Q(l,t(n).entityType==="lazy"?_(t(n).validators,t(n).threshold):"")}),Ie(()=>(t(n),t(l)),()=>{Q(c,f(t(n).entityType,t(l)))}),it(),He();var E=Dn(),S=r(E),z=r(S),A=o(r(z),2);se(()=>{t(n),ct(()=>{})});var X=r(A);X.value=X.__value="8545";var $=o(X);$.value=$.__value="8546";var M=o($);M.value=M.__value="8547",i(A);var y=o(A,2),j=r(y),J=o(r(j)),ee=o(J,4);i(j),i(y),i(z);var q=o(z,2),w=o(r(q),2);se(()=>{t(n),ct(()=>{})});var H=r(w);H.value=H.__value="lazy";var b=o(H);b.value=b.__value="numbered";var C=o(b);C.value=C.__value="named",i(w);var T=o(w,2),O=r(T),ue=r(O);{var ne=V=>{var ie=$n();qe(),p(V,ie)},te=V=>{var ie=je(),Ce=we(ie);{var Ve=xe=>{var Je=Nn();qe(),p(xe,Je)},Le=xe=>{var Je=Ln();qe(),p(xe,Je)};Z(Ce,xe=>{t(n),m(()=>t(n).entityType==="numbered")?xe(Ve):xe(Le,!1)},!0)}p(V,ie)};Z(ue,V=>{t(n),m(()=>t(n).entityType==="lazy")?V(ne):V(te,!1)})}i(O),i(T),i(q);var G=o(q,2),P=o(r(G),2);yt(P),qe(2),i(G);var Y=o(G,2),N=o(r(Y),2);We(N,5,()=>(t(n),m(()=>t(n).validators)),Ge,(V,ie,Ce)=>{var Ve=Cn(),Le=r(Ve);se(()=>{t(ie),ct(()=>{})});var xe=r(Le);xe.value=xe.__value="";var Je=o(xe);Je.value=Je.__value="alice";var Mt=o(Je);Mt.value=Mt.__value="bob";var Xt=o(Mt);Xt.value=Xt.__value="carol";var Pt=o(Xt);Pt.value=Pt.__value="david";var na=o(Pt);na.value=na.__value="eve",i(Le);var Et=o(Le,2);yt(Et);var $a=o(Et,2);{var Na=ot=>{var ia=zn();F("click",ia,()=>k(Ce)),p(ot,ia)};Z($a,ot=>{t(n),m(()=>t(n).validators.length>1)&&ot(Na)})}i(Ve),wt(Le,()=>t(ie).name,ot=>(t(ie).name=ot,ct(()=>t(n)))),$t(Et,()=>t(ie).weight,ot=>(t(ie).weight=ot,ct(()=>t(n)))),F("input",Et,g),p(V,Ve)}),i(N);var K=o(N,2);qe(2),i(Y);var pe=o(Y,2),_e=r(pe),Te=r(_e);i(_e);var ae=o(_e,2);yt(ae);var R=o(ae,2),re=r(R),B=o(r(re)),D=r(B,!0);i(B),i(re);var he=o(re,2),de=o(r(he)),ve=r(de,!0);i(de),i(he),i(R),i(pe);var le=o(pe,2);{var ce=V=>{var ie=An(),Ce=o(r(ie),2),Ve=r(Ce),Le=r(Ve,!0);i(Ve),i(Ce),qe(2),i(ie),se(()=>L(Le,t(l))),p(V,ie)};Z(le,V=>{t(n),m(()=>t(n).entityType==="lazy")&&V(ce)})}var fe=o(le,2),ye=o(r(fe),2),be=r(ye),U=r(be,!0);i(be),i(ye);var me=o(ye,2),ze=r(me);{var $e=V=>{var ie=Me("This will be your entity's unique identifier, derived from the quorum hash.");p(V,ie)},Ne=V=>{var ie=je(),Ce=we(ie);{var Ve=xe=>{var Je=Me("This will be your entity's sequential number (actual number may vary).");p(xe,Je)},Le=xe=>{var Je=Me("This will be your custom entity name (subject to admin approval).");p(xe,Je)};Z(Ce,xe=>{t(n),m(()=>t(n).entityType==="numbered")?xe(Ve):xe(Le,!1)},!0)}p(V,ie)};Z(ze,V=>{t(n),m(()=>t(n).entityType==="lazy")?V($e):V(Ne,!1)})}i(me),i(fe);var Ue=o(fe,2);{var st=V=>{var ie=jn(),Ce=r(ie);i(ie),se(()=>L(Ce,`‚ùå ${t(u)??""}`)),p(V,ie)};Z(Ue,V=>{t(u)&&V(st)})}var ut=o(Ue,2),rt=r(ut),Dt=r(rt,!0);i(rt);var sa=o(rt,2);i(ut),i(S),i(E),se(()=>{L(J,` ${t(n),m(()=>t(n).jurisdiction==="8545"?"Ethereum Mainnet":t(n).jurisdiction==="8546"?"Polygon Network":"Arbitrum One")??""}`),L(ee,` ${t(n),m(()=>t(n).jurisdiction)??""}`),L(Te,`üéØ Threshold: ${t(n),m(()=>t(n).threshold)??""}`),Ke(ae,"max",t(s)),L(D,t(s)),L(ve,(t(n),m(()=>t(n).threshold))),L(U,t(c)),rt.disabled=t(v),L(Dt,t(v)?"üîÑ Creating...":"üöÄ Create Entity"),sa.disabled=t(v)}),wt(A,()=>t(n).jurisdiction,V=>at(n,t(n).jurisdiction=V)),wt(w,()=>t(n).entityType,V=>at(n,t(n).entityType=V)),$t(P,()=>t(n).entityName,V=>at(n,t(n).entityName=V)),F("click",K,h),$t(ae,()=>t(n).threshold,V=>at(n,t(n).threshold=V)),F("click",rt,d),F("click",sa,x),p(e,E),Oe()}var Xn=I('<div class="entity-item svelte-eib5f9"><strong> </strong> <div class="entity-type svelte-eib5f9"> </div></div>'),Pn=I('<div class="no-entities svelte-eib5f9"> </div>'),qn=I('<div class="jurisdiction-card svelte-eib5f9"><div class="jurisdiction-header svelte-eib5f9"><h4 class="svelte-eib5f9"> </h4> <span><!></span></div> <div class="jurisdiction-details svelte-eib5f9"><div class="detail-row svelte-eib5f9"><span class="svelte-eib5f9">üì° RPC Port:</span> <span class="svelte-eib5f9"> </span></div> <div class="detail-row svelte-eib5f9"><span class="svelte-eib5f9">üîó Chain ID:</span> <span class="svelte-eib5f9"> </span></div> <div class="detail-row svelte-eib5f9"><span class="svelte-eib5f9">üìä Block Number:</span> <span class="svelte-eib5f9"> </span></div> <div class="detail-row svelte-eib5f9"><span class="svelte-eib5f9">‚è∞ Last Update:</span> <span class="svelte-eib5f9"> </span></div> <div class="detail-row svelte-eib5f9"><span class="svelte-eib5f9">üìù Contract:</span> <span class="contract-address svelte-eib5f9"> </span></div> <div class="detail-row svelte-eib5f9"><span class="svelte-eib5f9">üî¢ Next Entity #:</span> <span class="svelte-eib5f9"> </span></div></div> <div class="entities-section svelte-eib5f9"><h5 class="svelte-eib5f9">üìã Registered Entities:</h5> <div class="entities-list svelte-eib5f9"><!></div></div> <div class="jurisdiction-actions svelte-eib5f9"><!></div></div>'),Hn=I('<div class="jurisdictions-panel svelte-eib5f9"><h3 class="svelte-eib5f9">üèõÔ∏è Blockchain Jurisdictions Status</h3> <div class="jurisdiction-grid svelte-eib5f9"></div> <div class="global-actions svelte-eib5f9"><!> <!></div></div>');function Fn(e,a){Fe(a,!1);let s=oe([{port:8545,name:"Ethereum Mainnet",icon:"üî∑",chainId:"31337",blockNumber:0,contractAddress:"",nextEntityNumber:1,status:"checking",lastUpdate:"",entities:[]},{port:8546,name:"Polygon Network",icon:"üü£",chainId:"31337",blockNumber:0,contractAddress:"",nextEntityNumber:1,status:"checking",lastUpdate:"",entities:[]},{port:8547,name:"Arbitrum One",icon:"üîµ",chainId:"31337",blockNumber:0,contractAddress:"",nextEntityNumber:1,status:"checking",lastUpdate:"",entities:[]}]);async function l(d){d.status="checking",d.lastUpdate="Checking...";try{const x=await fetch(`http://localhost:${d.port}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",method:"eth_blockNumber",params:[],id:1})});if(!x.ok)throw new Error("Network unavailable");const _=await x.json();if(_.error)throw new Error(_.error.message);d.blockNumber=parseInt(_.result,16),d.status="connected",d.lastUpdate=new Date().toLocaleTimeString(),d.contractAddress="0x1234...5678",d.nextEntityNumber=Math.floor(Math.random()*100)+1,d.entities=[{id:"#1",name:"Demo Entity",type:"Numbered"},{id:"#2",name:"Test Entity",type:"Numbered"}]}catch{d.status="disconnected",d.lastUpdate="Failed",d.contractAddress="Not available",d.nextEntityNumber=0,d.entities=[]}Q(s,[...t(s)])}async function c(){for(const d of t(s))await l(d)}async function n(){alert("Contract deployment feature coming soon! For now, use: cd contracts && npx hardhat ignition deploy ignition/modules/Depository.ts --network localhost")}zt(()=>{c()}),He();var v=Hn(),u=o(r(v),2);We(u,5,()=>t(s),Ge,(d,x)=>{var _=qn(),f=r(_),E=r(f),S=r(E);i(E);var z=o(E,2),A=r(z);{var X=B=>{var D=Me("‚úÖ Connected");p(B,D)},$=B=>{var D=je(),he=we(D);{var de=le=>{var ce=Me("‚ùå Disconnected");p(le,ce)},ve=le=>{var ce=Me("üîÑ Checking...");p(le,ce)};Z(he,le=>{t(x).status==="disconnected"?le(de):le(ve,!1)},!0)}p(B,D)};Z(A,B=>{t(x).status==="connected"?B(X):B($,!1)})}i(z),i(f);var M=o(f,2),y=r(M),j=o(r(y),2),J=r(j,!0);i(j),i(y);var ee=o(y,2),q=o(r(ee),2),w=r(q,!0);i(q),i(ee);var H=o(ee,2),b=o(r(H),2),C=r(b,!0);i(b),i(H);var T=o(H,2),O=o(r(T),2),ue=r(O,!0);i(O),i(T);var ne=o(T,2),te=o(r(ne),2),G=r(te,!0);i(te),i(ne);var P=o(ne,2),Y=o(r(P),2),N=r(Y);i(Y),i(P),i(M);var K=o(M,2),pe=o(r(K),2),_e=r(pe);{var Te=B=>{var D=je(),he=we(D);We(he,1,()=>t(x).entities,Ge,(de,ve)=>{var le=Xn(),ce=r(le),fe=r(ce,!0);i(ce);var ye=o(ce),be=o(ye),U=r(be,!0);i(be),i(le),se(()=>{L(fe,t(ve).id),L(ye,`: ${t(ve).name??""} `),L(U,t(ve).type)}),p(de,le)}),p(B,D)},ae=B=>{var D=Pn(),he=r(D,!0);i(D),se(()=>L(he,t(x).status==="connected"?"No entities registered yet":"Connection required")),p(B,D)};Z(_e,B=>{t(x).entities.length>0?B(Te):B(ae,!1)})}i(pe),i(K);var R=o(K,2),re=r(R);{let B=Ct(()=>t(x).status==="checking");Bt(re,{variant:"secondary",size:"small",get disabled(){return t(B)},$$events:{click:()=>l(t(x))},children:(D,he)=>{qe();var de=Me("üîÑ Refresh");p(D,de)},$$slots:{default:!0}})}i(R),i(_),se(()=>{Ke(_,"id",`jurisdiction-${t(x).port??""}`),L(S,`${t(x).icon??""} ${t(x).name??""}`),ke(z,1,`connection-status ${t(x).status??""}`,"svelte-eib5f9"),L(J,t(x).port),L(w,t(x).chainId),L(C,t(x).blockNumber),L(ue,t(x).lastUpdate),L(G,t(x).contractAddress),L(N,`#${t(x).nextEntityNumber??""}`)}),p(d,_)}),i(u);var h=o(u,2),k=r(h);Bt(k,{variant:"primary",$$events:{click:c},children:(d,x)=>{qe();var _=Me("üîÑ Refresh All");p(d,_)},$$slots:{default:!0}});var g=o(k,2);Bt(g,{variant:"secondary",$$events:{click:n},children:(d,x)=>{qe();var _=Me("üöÄ Deploy Contracts");p(d,_)},$$slots:{default:!0}}),i(h),i(v),p(e,v),Oe()}var On=I('<meta name="description" content="XLN Visual Debugger - Real-time consensus monitoring and debugging interface"/>'),Rn=I('<div class="loading-container svelte-1xh7afz"><div class="loading-spinner svelte-1xh7afz">üîÑ</div> <div class="loading-text svelte-1xh7afz">Loading XLN Environment...</div></div>'),Un=I('<div class="error-container svelte-1xh7afz"><div class="error-icon svelte-1xh7afz">‚ùå</div> <div class="error-text svelte-1xh7afz">Failed to load XLN Environment</div> <div class="error-details svelte-1xh7afz"> </div> <button class="retry-btn svelte-1xh7afz">Retry</button></div>'),Vn=I('<div class="main-content svelte-1xh7afz"><div class="entity-panels-container svelte-1xh7afz" id="entityPanelsContainer"></div> <!> <div class="actionable-tabs-container svelte-1xh7afz"><div class="tabs-header svelte-1xh7afz"><button id="formationTab">üèóÔ∏è Entity Formation</button> <button id="jurisdictionsTab">üèõÔ∏è Jurisdictions</button></div> <div id="formationTabContent"><!></div> <div id="jurisdictionsTabContent"><!></div></div></div> <!>',1),Jn=I('<main class="app svelte-1xh7afz"><!> <!></main>');function Zn(e,a){Fe(a,!1);const[s,l]=_t(),c=()=>Ae(Nt,"$isLoading",s),n=()=>Ae(Yt,"$error",s),v=()=>Ae(Re,"$tabs",s);let u=oe("formation");function h(f){Q(u,f)}zt(async()=>{try{console.log("üöÄ Initializing XLN Svelte application..."),Tt.initialize(),vt.loadFromStorage(),vt.initializeDefaultTabs(),nt.initialize(),await dt.initialize(),console.log("‚úÖ XLN Svelte application initialized successfully")}catch(f){console.error("‚ùå Failed to initialize XLN application:",f)}}),He();var k=Jn();as(f=>{var E=On();ss.title="XLN Consensus Visual Debug",p(f,E)});var g=r(k);$s(g,{});var d=o(g,2);{var x=f=>{var E=Rn();p(f,E)},_=f=>{var E=je(),S=we(E);{var z=X=>{var $=Un(),M=o(r($),4),y=r(M,!0);i(M);var j=o(M,2);i($),se(()=>L(y,n())),F("click",j,()=>dt.initialize()),p(X,$)},A=X=>{var $=Vn(),M=we($),y=r(M);We(y,7,v,P=>P.id,(P,Y,N)=>{{let K=Ct(()=>t(N)===v().length-1);pn(P,{get tab(){return t(Y)},get isLast(){return t(K)}})}}),i(y);var j=o(y,2);kn(j,{});var J=o(j,2),ee=r(J),q=r(ee);let w;var H=o(q,2);let b;i(ee);var C=o(ee,2);let T;var O=r(C);Mn(O,{}),i(C);var ue=o(C,2);let ne;var te=r(ue);Fn(te,{}),i(ue),i(J),i(M);var G=o(M,2);Ls(G,{}),se((P,Y,N,K)=>{Ke(y,"data-panel-count",v().length),w=ke(q,1,"tab-button svelte-1xh7afz",null,w,P),b=ke(H,1,"tab-button svelte-1xh7afz",null,b,Y),T=ke(C,1,"tab-content svelte-1xh7afz",null,T,N),ne=ke(ue,1,"tab-content svelte-1xh7afz",null,ne,K)},[()=>({active:t(u)==="formation"}),()=>({active:t(u)==="jurisdictions"}),()=>({active:t(u)==="formation"}),()=>({active:t(u)==="jurisdictions"})]),F("click",q,()=>h("formation")),F("click",H,()=>h("jurisdictions")),p(X,$)};Z(S,X=>{n()?X(z):X(A,!1)},!0)}p(f,E)};Z(d,f=>{c()?f(x):f(_,!1)})}i(k),p(e,k),Oe(),l()}export{Zn as component};
