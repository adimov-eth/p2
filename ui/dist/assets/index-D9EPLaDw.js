(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function M(){}function Mt(e){return e()}function at(){return Object.create(null)}function ve(e){e.forEach(Mt)}function zt(e){return typeof e=="function"}function qe(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Rt(e){return Object.keys(e).length===0}function Jt(e,...t){if(e==null){for(const l of t)l(void 0);return M}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Je(e){let t;return Jt(e,n=>t=n)(),t}function a(e,t){e.appendChild(t)}function w(e,t,n){e.insertBefore(t,n||null)}function k(e){e.parentNode&&e.parentNode.removeChild(e)}function Ce(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function d(e){return document.createElement(e)}function L(e){return document.createTextNode(e)}function b(){return L(" ")}function De(){return L("")}function O(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function c(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Ke(e){return e===""?null:+e}function Ht(e){return Array.from(e.childNodes)}function fe(e,t){t=""+t,e.data!==t&&(e.data=t)}function D(e,t){e.value=t??""}function q(e,t,n,l){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,"")}function ut(e,t,n){for(let l=0;l<e.options.length;l+=1){const i=e.options[l];if(i.__value===t){i.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function Vt(e){const t=e.querySelector(":checked");return t&&t.__value}let Ae;function Te(e){Ae=e}function Xt(){if(!Ae)throw new Error("Function called outside component initialization");return Ae}function Ze(e){Xt().$$.on_mount.push(e)}const Ne=[],We=[];let Le=[];const dt=[],qt=Promise.resolve();let Ge=!1;function Dt(){Ge||(Ge=!0,qt.then(Ot))}function Ve(e){Le.push(e)}const xe=new Set;let Ie=0;function Ot(){if(Ie!==0)return;const e=Ae;do{try{for(;Ie<Ne.length;){const t=Ne[Ie];Ie++,Te(t),Ut(t.$$)}}catch(t){throw Ne.length=0,Ie=0,t}for(Te(null),Ne.length=0,Ie=0;We.length;)We.pop()();for(let t=0;t<Le.length;t+=1){const n=Le[t];xe.has(n)||(xe.add(n),n())}Le.length=0}while(Ne.length);for(;dt.length;)dt.pop()();Ge=!1,xe.clear(),Te(e)}function Ut(e){if(e.fragment!==null){e.update(),ve(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Ve)}}function xt(e){const t=[],n=[];Le.forEach(l=>e.indexOf(l)===-1?t.push(l):n.push(l)),n.forEach(l=>l()),Le=t}const He=new Set;let $e;function Kt(){$e={r:0,c:[],p:$e}}function Wt(){$e.r||ve($e.c),$e=$e.p}function Me(e,t){e&&e.i&&(He.delete(e),e.i(t))}function Xe(e,t,n,l){if(e&&e.o){if(He.has(e))return;He.add(e),$e.c.push(()=>{He.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}else l&&l()}function U(e){return e?.length!==void 0?e:Array.from(e)}function ft(e){e&&e.c()}function Qe(e,t,n){const{fragment:l,after_update:i}=e.$$;l&&l.m(t,n),Ve(()=>{const o=e.$$.on_mount.map(Mt).filter(zt);e.$$.on_destroy?e.$$.on_destroy.push(...o):ve(o),e.$$.on_mount=[]}),i.forEach(Ve)}function Ye(e,t){const n=e.$$;n.fragment!==null&&(xt(n.after_update),ve(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Gt(e,t){e.$$.dirty[0]===-1&&(Ne.push(e),Dt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function et(e,t,n,l,i,o,r=null,s=[-1]){const f=Ae;Te(e);const u=e.$$={fragment:null,ctx:[],props:o,update:M,not_equal:i,bound:at(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(f?f.$$.context:[])),callbacks:at(),dirty:s,skip_bound:!1,root:t.target||f.$$.root};r&&r(u.root);let h=!1;if(u.ctx=n?n(e,t.props||{},(p,m,...$)=>{const I=$.length?$[0]:m;return u.ctx&&i(u.ctx[p],u.ctx[p]=I)&&(!u.skip_bound&&u.bound[p]&&u.bound[p](I),h&&Gt(e,p)),m}):[],u.update(),h=!0,ve(u.before_update),u.fragment=l?l(u.ctx):!1,t.target){if(t.hydrate){const p=Ht(t.target);u.fragment&&u.fragment.l(p),p.forEach(k)}else u.fragment&&u.fragment.c();t.intro&&Me(e.$$.fragment),Qe(e,t.target,t.anchor),Ot()}Te(f)}class tt{$$=void 0;$$set=void 0;$destroy(){Ye(this,1),this.$destroy=M}$on(t,n){if(!zt(n))return M;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const i=l.indexOf(n);i!==-1&&l.splice(i,1)}}$set(t){this.$$set&&!Rt(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Qt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Qt);const Ee=[];function Oe(e,t=M){let n;const l=new Set;function i(s){if(qe(e,s)&&(e=s,n)){const f=!Ee.length;for(const u of l)u[1](),Ee.push(u,e);if(f){for(let u=0;u<Ee.length;u+=2)Ee[u][0](Ee[u+1]);Ee.length=0}}}function o(s){i(s(e))}function r(s,f=M){const u=[s,f];return l.add(u),l.size===1&&(n=t(i,o)||M),s(e),()=>{l.delete(u),l.size===0&&n&&(n(),n=null)}}return{set:i,update:o,subscribe:r}}const me=Oe(null),ze=Oe(null),Yt=Oe(null),pt=Oe([]);function Zt(e){const t=Date.now();pt.update(n=>[...n,{id:t,text:e}]),setTimeout(()=>{pt.update(n=>n.filter(l=>l.id!==t))},2500)}function en(e){return function(){let t=e+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}}const tn=Oe(()=>Math.random());async function jt(){let e=null;try{const o=window.__useDistServer===!0||localStorage.getItem("xln_use_dist_server")==="1";{const r=new Function("p","return import(p)"),s=["/dist/server.js","http://localhost:8080/dist/server.js",`${location.protocol}//${location.hostname}:56522/dist/server.js`];for(const f of s)try{if(e=await r(f),e)break}catch{}}}catch(i){console.warn("XLN server runtime not available yet:",i)}if(!e)return ze.set(null),me.set(null),{XLN:null,env:null};ze.set(e);const n=new URLSearchParams(location.search).get("seed");if(n){const i=Number(n)>>>0;Yt.set(i),tn.set(en(i))}const l=await e.main();return window.xlnEnv=l,me.set(l),{XLN:e,env:l}}async function nn(e,t,n,l){let i=null,o=null;if(ze.subscribe(p=>i=p),me.subscribe(p=>o=p),!i||!o)throw new Error("Environment not initialized");const r=t.map(p=>p.signer),s=i.createLazyEntity(e,r,BigInt(n),l),f=i.generateLazyEntityId(r,BigInt(n)),u=r.map((p,m)=>({type:"importReplica",entityId:f,signerId:p,data:{config:s,isProposer:m===0}})),h=i.applyServerInput(o,{serverTxs:u,entityInputs:[]});return i.processUntilEmpty(o,h.entityOutbox),me.set(o),Zt(`Entity "${e}" created`),{entityId:f}}function Se(){let e=null;return ze.subscribe(t=>e=t)(),e}async function ln(){const e=Se();if(!e)return new Map;try{return await e.getAvailableJurisdictions()}catch{return new Map}}async function on(e){const t=Se();if(!t)return null;try{const n=await t.getAvailableJurisdictions(),l=String(e);return n.get(l)??null}catch{return null}}async function _t(e){const t=Se();if(!t||!e)return null;try{const n=await t.getNextEntityNumber(e);return Number(n)}catch{return null}}function ht(e,t,n){const l=e.slice();return l[20]=t[n],l[21]=t,l[22]=n,l}function mt(e,t,n){const l=e.slice();return l[23]=t[n][0],l[24]=t[n][1],l}function rn(e){let t;return{c(){t=d("option"),t.textContent="Runtime not loaded",t.__value="",D(t,t.__value)},m(n,l){w(n,t,l)},p:M,d(n){n&&k(t)}}}function sn(e){let t,n=U(Array.from(e[5].entries())),l=[];for(let i=0;i<n.length;i+=1)l[i]=vt(mt(e,n,i));return{c(){for(let i=0;i<l.length;i+=1)l[i].c();t=De()},m(i,o){for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(i,o);w(i,t,o)},p(i,o){if(o&48){n=U(Array.from(i[5].entries()));let r;for(r=0;r<n.length;r+=1){const s=mt(i,n,r);l[r]?l[r].p(s,o):(l[r]=vt(s),l[r].c(),l[r].m(t.parentNode,t))}for(;r<l.length;r+=1)l[r].d(1);l.length=n.length}},d(i){i&&k(t),Ce(l,i)}}}function vt(e){let t,n=e[24].name+"",l,i,o=e[23]+"",r,s,f,u;return{c(){t=d("option"),l=L(n),i=L(" (Port "),r=L(o),s=L(")"),t.__value=f=e[23],D(t,t.__value),t.selected=u=e[4]&&e[5].get(e[23])===e[4]},m(h,p){w(h,t,p),a(t,l),a(t,i),a(t,r),a(t,s)},p(h,p){p&32&&n!==(n=h[24].name+"")&&fe(l,n),p&32&&o!==(o=h[23]+"")&&fe(r,o),p&32&&f!==(f=h[23])&&(t.__value=f,D(t,t.__value)),p&48&&u!==(u=h[4]&&h[5].get(h[23])===h[4])&&(t.selected=u)},d(h){h&&k(t)}}}function cn(e){let t;return{c(){t=d("span"),t.textContent="Select jurisdiction (or load runtime)",c(t,"class","text-gray-400")},m(n,l){w(n,t,l)},p:M,d(n){n&&k(t)}}}function an(e){let t,n,l,i;return{c(){t=L("🔢 Next Available Number: "),n=d("span"),l=L("#"),i=L(e[6]),c(n,"id","nextNumberDisplay")},m(o,r){w(o,t,r),w(o,n,r),a(n,l),a(n,i)},p(o,r){r&64&&fe(i,o[6])},d(o){o&&(k(t),k(n))}}}function gt(e){let t,n,l;function i(){return e[17](e[22])}return{c(){t=d("button"),t.textContent="❌",c(t,"class","px-2 py-1 border border-outline rounded")},m(o,r){w(o,t,r),n||(l=O(t,"click",i),n=!0)},p(o,r){e=o},d(o){o&&k(t),n=!1,l()}}}function bt(e){let t,n,l,i,o,r,s,f;function u(){e[15].call(n,e[21],e[22])}function h(){e[16].call(i,e[21],e[22])}let p=e[3].length>1&&gt(e);return{c(){t=d("div"),n=d("input"),l=b(),i=d("input"),o=b(),p&&p.c(),r=b(),c(n,"aria-label","Signer"),c(n,"class","bg-surface border border-outline rounded px-2 py-1 w-36"),c(i,"aria-label","Weight"),c(i,"type","number"),c(i,"min","1"),c(i,"class","bg-surface border border-outline rounded px-2 py-1 w-24 validator-weight"),c(t,"class","flex gap-2 items-center validator-row"),c(t,"data-validator-id",e[22])},m(m,$){w(m,t,$),a(t,n),D(n,e[20].signer),a(t,l),a(t,i),D(i,e[20].weight),a(t,o),p&&p.m(t,null),a(t,r),s||(f=[O(n,"input",u),O(i,"input",h)],s=!0)},p(m,$){e=m,$&8&&n.value!==e[20].signer&&D(n,e[20].signer),$&8&&Ke(i.value)!==e[20].weight&&D(i,e[20].weight),e[3].length>1?p?p.p(e,$):(p=gt(e),p.c(),p.m(t,r)):p&&(p.d(1),p=null)},d(m){m&&k(t),p&&p.d(),s=!1,ve(f)}}}function yt(e){let t,n,l;return{c(){t=d("button"),t.textContent="Load Runtime",c(t,"class","border border-outline rounded px-3 py-1")},m(i,o){w(i,t,o),n||(l=O(t,"click",dn),n=!0)},p:M,d(i){i&&k(t),n=!1,l()}}}function un(e){let t,n,l,i,o,r,s,f,u,h,p,m,$,I,J,pe,_,y,g,S,x,C,z,F,_e,ie,H,ge,Z,be,oe,B,he,ye,ee,re,R,ke,W,se,Q,ce,Pe;function ae(v,A){return v[7]&&v[5].size>0?sn:rn}let Y=ae(e),T=Y(e);function ue(v,A){return v[6]!==null?an:cn}let de=ue(e),K=de(e),G=U(e[3]),P=[];for(let v=0;v<G.length;v+=1)P[v]=bt(ht(e,G,v));let j=!e[7]&&yt();return{c(){t=d("div"),n=d("div"),l=d("div"),i=d("label"),i.textContent="🆔 Entity Type",o=b(),r=d("select"),s=d("option"),s.textContent="🔒 Lazy",f=d("option"),f.textContent="🔢 Numbered",u=d("option"),u.textContent="🏷️ Named",h=b(),p=d("div"),m=d("label"),m.textContent="🏛️ Jurisdiction",$=b(),I=d("select"),T.c(),pe=b(),_=d("div"),K.c(),y=b(),g=d("div"),S=d("label"),S.textContent="🏷️ Entity Name",x=b(),C=d("input"),z=b(),F=d("div"),_e=d("label"),_e.textContent="👥 Validators",ie=b(),H=d("div");for(let v=0;v<P.length;v+=1)P[v].c();ge=b(),Z=d("button"),Z.textContent="➕ Add New Validator",be=b(),oe=d("div"),B=d("label"),he=L("🎯 Threshold: "),ye=d("span"),ee=L(e[2]),re=b(),R=d("input"),ke=b(),W=d("div"),se=d("button"),se.textContent="🚀 Create Entity",Q=b(),j&&j.c(),c(i,"class","block text-sm"),c(i,"for","entityTypeSelect"),s.__value="lazy",D(s,s.__value),f.__value="numbered",D(f,f.__value),f.disabled=!0,u.__value="named",D(u,u.__value),u.disabled=!0,c(r,"id","entityTypeSelect"),c(r,"class","bg-surface border border-outline rounded px-2 py-1"),e[0]===void 0&&Ve(()=>e[13].call(r)),c(l,"class","mb-2"),c(m,"class","block text-sm"),c(m,"for","jurisdictionSelect"),c(I,"id","jurisdictionSelect"),c(I,"class","bg-surface border border-outline rounded px-2 py-1"),I.disabled=J=!e[7],c(_,"id","nextNumberInfo"),c(_,"class","text-xs text-green-300 mt-1"),q(_,"display","block"),c(p,"class","mb-2"),c(S,"class","block text-sm"),c(S,"for","entityNameInput"),c(C,"id","entityNameInput"),c(C,"class","w-full bg-surface border border-outline rounded px-2 py-1"),c(g,"class","mb-2"),c(_e,"class","block text-sm"),c(_e,"for","validatorsList"),c(H,"id","validatorsList"),c(H,"class","space-y-2"),c(Z,"class","mt-2 px-2 py-1 border border-outline rounded"),c(F,"class","mb-2"),c(ye,"id","thresholdValue"),c(B,"class","block text-sm"),c(B,"for","thresholdSlider"),c(R,"id","thresholdSlider"),c(R,"type","range"),c(R,"min","1"),c(R,"max","10"),c(oe,"class","mb-2"),c(se,"class","btn btn-primary border border-outline rounded px-3 py-1"),c(se,"id","createEntityBtn"),c(W,"class","mt-3 flex gap-2"),c(n,"class","bg-panel border border-outline rounded p-3"),c(t,"class","space-y-3"),c(t,"id","formationTabContent")},m(v,A){w(v,t,A),a(t,n),a(n,l),a(l,i),a(l,o),a(l,r),a(r,s),a(r,f),a(r,u),ut(r,e[0],!0),a(n,h),a(n,p),a(p,m),a(p,$),a(p,I),T.m(I,null),a(p,pe),a(p,_),K.m(_,null),a(n,y),a(n,g),a(g,S),a(g,x),a(g,C),D(C,e[1]),a(n,z),a(n,F),a(F,_e),a(F,ie),a(F,H);for(let N=0;N<P.length;N+=1)P[N]&&P[N].m(H,null);a(F,ge),a(F,Z),a(n,be),a(n,oe),a(oe,B),a(B,he),a(B,ye),a(ye,ee),a(oe,re),a(oe,R),D(R,e[2]),a(n,ke),a(n,W),a(W,se),a(W,Q),j&&j.m(W,null),ce||(Pe=[O(r,"change",e[13]),O(I,"change",e[11]),O(C,"input",e[14]),O(Z,"click",e[8]),O(R,"change",e[18]),O(R,"input",e[18]),O(se,"click",e[10])],ce=!0)},p(v,[A]){if(A&1&&ut(r,v[0]),Y===(Y=ae(v))&&T?T.p(v,A):(T.d(1),T=Y(v),T&&(T.c(),T.m(I,null))),A&128&&J!==(J=!v[7])&&(I.disabled=J),de===(de=ue(v))&&K?K.p(v,A):(K.d(1),K=de(v),K&&(K.c(),K.m(_,null))),A&2&&C.value!==v[1]&&D(C,v[1]),A&520){G=U(v[3]);let N;for(N=0;N<G.length;N+=1){const we=ht(v,G,N);P[N]?P[N].p(we,A):(P[N]=bt(we),P[N].c(),P[N].m(H,null))}for(;N<P.length;N+=1)P[N].d(1);P.length=G.length}A&4&&fe(ee,v[2]),A&4&&D(R,v[2]),v[7]?j&&(j.d(1),j=null):j?j.p(v,A):(j=yt(),j.c(),j.m(W,null))},i:M,o:M,d(v){v&&k(t),T.d(),K.d(),Ce(P,v),j&&j.d(),ce=!1,ve(Pe)}}}function dn(){localStorage.setItem("xln_use_dist_server","1"),location.reload()}function fn(e,t,n){let{idPrefix:l=""}=t,i="lazy",o="ACME",r=1,s=[{signer:"alice",weight:1}],f=null,u=new Map,h=null,p=!1;Ze(async()=>{await jt(),ze.subscribe(C=>C),n(7,p=!!Se()),p&&(n(5,u=await ln()),n(4,f=u.get("8545")??Array.from(u.values())[0]??null),f&&n(6,h=await _t(f)))});function m(){n(3,s=[...s,{signer:"bob",weight:1}])}function $(C){n(3,s=s.filter((z,F)=>F!==C))}async function I(){if(!Se()){alert('Runtime not loaded. Click "Load Runtime" or set localStorage xln_use_dist_server=1 and reload.');return}if(i!=="lazy")return alert("Lazy only for first pass");await nn(o,s,r,f)}async function J(C){const z=C.target.value;n(4,f=await on(z)),n(6,h=f?await _t(f):null)}function pe(){i=Vt(this),n(0,i)}function _(){o=this.value,n(1,o)}function y(C,z){C[z].signer=this.value,n(3,s)}function g(C,z){C[z].weight=Ke(this.value),n(3,s)}const S=C=>$(C);function x(){r=Ke(this.value),n(2,r)}return e.$$set=C=>{"idPrefix"in C&&n(12,l=C.idPrefix)},[i,o,r,s,f,u,h,p,m,$,I,J,l,pe,_,y,g,S,x]}class pn extends tt{constructor(t){super(),et(this,t,fn,un,qe,{idPrefix:12})}}function kt(e,t,n){const l=e.slice();return l[16]=t[n],l[17]=t,l[18]=n,l}function wt(e,t,n){const l=e.slice();return l[19]=t[n][0],l[20]=t[n][1],l}function $t(e,t,n){const l=e.slice();return l[23]=t[n],l[25]=n,l}function Ct(e,t,n){const l=e.slice();return l[26]=t[n][0],l[27]=t[n][1],l}function It(e,t,n){const l=e.slice();return l[30]=t[n],l}function _n(e){let t;return{c(){t=L("Select Entity")},m(n,l){w(n,t,l)},p:M,d(n){n&&k(t)}}}function hn(e){let t=e[16].signer+"",n,l,i=e[16].entityId.slice(0,10)+"",o,r;return{c(){n=L(t),l=L(".eth → "),o=L(i),r=L("...")},m(s,f){w(s,n,f),w(s,l,f),w(s,o,f),w(s,r,f)},p(s,f){f[0]&1&&t!==(t=s[16].signer+"")&&fe(n,t),f[0]&1&&i!==(i=s[16].entityId.slice(0,10)+"")&&fe(o,i)},d(s){s&&(k(n),k(l),k(o),k(r))}}}function Et(e){let t,n,l=U(Object.entries(e[4]())),i=[];for(let o=0;o<l.length;o+=1)i[o]=Lt(Ct(e,l,o));return{c(){t=d("div");for(let o=0;o<i.length;o+=1)i[o].c();c(t,"class","unified-dropdown-content svelte-10xtvke"),c(t,"id",n=`dropdownContent-${e[16].id}`),q(t,"max-height","260px"),q(t,"overflow","auto"),q(t,"border","1px solid #3e3e3e"),q(t,"background","#252526")},m(o,r){w(o,t,r);for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(t,null)},p(o,r){if(r[0]&49){l=U(Object.entries(o[4]()));let s;for(s=0;s<l.length;s+=1){const f=Ct(o,l,s);i[s]?i[s].p(f,r):(i[s]=Lt(f),i[s].c(),i[s].m(t,null))}for(;s<i.length;s+=1)i[s].d(1);i.length=l.length}r[0]&1&&n!==(n=`dropdownContent-${o[16].id}`)&&c(t,"id",n)},d(o){o&&k(t),Ce(i,o)}}}function Nt(e){let t,n,l,i,o;function r(){return e[9](e[16],e[30])}return{c(){t=d("div"),n=d("span"),n.textContent=`🏢 ${e[30].entityId}`,l=b(),c(n,"class","item-text"),c(t,"class","dropdown-item indent-2 svelte-10xtvke")},m(s,f){w(s,t,f),a(t,n),a(t,l),i||(o=O(t,"click",r),i=!0)},p(s,f){e=s},d(s){s&&k(t),i=!1,o()}}}function Lt(e){let t,n,l,i,o=U(e[27]),r=[];for(let s=0;s<o.length;s+=1)r[s]=Nt(It(e,o,s));return{c(){t=d("div"),n=d("span"),n.textContent=`👤 ${e[26]}.eth`,l=b();for(let s=0;s<r.length;s+=1)r[s].c();i=De(),c(n,"class","item-text"),c(t,"class","dropdown-item indent-1 svelte-10xtvke")},m(s,f){w(s,t,f),a(t,n),w(s,l,f);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(s,f);w(s,i,f)},p(s,f){if(f[0]&49){o=U(s[27]);let u;for(u=0;u<o.length;u+=1){const h=It(s,o,u);r[u]?r[u].p(h,f):(r[u]=Nt(h),r[u].c(),r[u].m(i.parentNode,i))}for(;u<r.length;u+=1)r[u].d(1);r.length=o.length}},d(s){s&&(k(t),k(l),k(i)),Ce(r,s)}}}function mn(e){let t;return{c(){t=d("div"),t.textContent="- no messages",c(t,"class","empty-state svelte-10xtvke")},m(n,l){w(n,t,l)},p:M,d(n){n&&k(t)}}}function vn(e){let t,n=U(e[6](e[16]).state.messages),l=[];for(let i=0;i<n.length;i+=1)l[i]=St($t(e,n,i));return{c(){for(let i=0;i<l.length;i+=1)l[i].c();t=De()},m(i,o){for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(i,o);w(i,t,o)},p(i,o){if(o[0]&65){n=U(i[6](i[16]).state.messages);let r;for(r=0;r<n.length;r+=1){const s=$t(i,n,r);l[r]?l[r].p(s,o):(l[r]=St(s),l[r].c(),l[r].m(t.parentNode,t))}for(;r<l.length;r+=1)l[r].d(1);l.length=n.length}},d(i){i&&k(t),Ce(l,i)}}}function St(e){let t,n,l,i=e[25]+1+"",o,r,s=e[6](e[16]).signerId+"",f,u,h=e[23]+"",p;return{c(){t=d("div"),n=d("div"),l=L("Message #"),o=L(i),r=L(" • "),f=L(s),u=d("div"),p=L(h),c(n,"class","chat-meta"),c(u,"class","chat-content"),c(t,"class","chat-message svelte-10xtvke")},m(m,$){w(m,t,$),a(t,n),a(n,l),a(n,o),a(n,r),a(n,f),a(t,u),a(u,p)},p(m,$){$[0]&1&&s!==(s=m[6](m[16]).signerId+"")&&fe(f,s),$[0]&1&&h!==(h=m[23]+"")&&fe(p,h)},d(m){m&&k(t)}}}function gn(e){let t;return{c(){t=d("div"),t.textContent="- no proposals",c(t,"class","empty-state svelte-10xtvke")},m(n,l){w(n,t,l)},p:M,d(n){n&&k(t)}}}function bn(e){let t,n=U(Array.from(e[6](e[16]).state.proposals.entries())),l=[];for(let i=0;i<n.length;i+=1)l[i]=Pt(wt(e,n,i));return{c(){for(let i=0;i<l.length;i+=1)l[i].c();t=De()},m(i,o){for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(i,o);w(i,t,o)},p(i,o){if(o[0]&65){n=U(Array.from(i[6](i[16]).state.proposals.entries()));let r;for(r=0;r<n.length;r+=1){const s=wt(i,n,r);l[r]?l[r].p(s,o):(l[r]=Pt(s),l[r].c(),l[r].m(t.parentNode,t))}for(;r<l.length;r+=1)l[r].d(1);l.length=n.length}},d(i){i&&k(t),Ce(l,i)}}}function Pt(e){let t,n,l=(e[20]?.action?.data?.message||e[19])+"",i;return{c(){t=d("div"),n=d("div"),i=L(l),c(n,"class","proposal-title"),c(t,"class","proposal-item")},m(o,r){w(o,t,r),a(t,n),a(n,i)},p(o,r){r[0]&1&&l!==(l=(o[20]?.action?.data?.message||o[19])+"")&&fe(i,l)},d(o){o&&k(t)}}}function Tt(e){let t,n,l,i,o,r,s,f,u,h,p,m,$,I,J,pe,_,y,g,S,x,C,z,F,_e,ie,H,ge,Z,be,oe,B,he,ye,ee,re,R,ke,W,se,Q,ce,Pe,ae,Y,T,ue,de,K,G,P=e[16],j,v,A,N,we,nt,je,Ue,lt;function it(X,E){return X[16].signer&&X[16].entityId?hn:_n}let Fe=it(e),te=Fe(e);function Ft(){return e[8](e[16])}let V=e[1][e[16].id]&&Et(e);function ot(X,E){return E[0]&1&&(g=null),g==null&&(g=!!X[6](X[16])?.state?.messages?.length),g?vn:mn}let Be=ot(e,[-1,-1]),ne=Be(e);function rt(X,E){return E[0]&1&&(ge=null),ge==null&&(ge=!!X[6](X[16])?.state?.proposals?.size),ge?bn:gn}let Re=rt(e,[-1,-1]),le=Re(e);const st=()=>e[10](G,P),ct=()=>e[10](null,P);function Bt(){return e[11](e[16])}return{c(){t=d("div"),n=d("div"),l=d("div"),i=d("button"),o=d("span"),o.textContent="🏛️",r=b(),s=d("span"),te.c(),u=b(),h=d("span"),h.textContent="▼",p=b(),V&&V.c(),$=b(),I=d("div"),J=d("div"),J.innerHTML='<div class="component-title"><span>💬</span><span>Chat</span></div> <div class="component-toggle">▼</div>',pe=b(),_=d("div"),y=d("div"),ne.c(),C=b(),z=d("div"),F=d("div"),F.innerHTML='<div class="component-title"><span>📋</span><span>Proposals</span></div> <div class="component-toggle">▼</div>',_e=b(),ie=d("div"),H=d("div"),le.c(),oe=b(),B=d("div"),he=d("div"),he.innerHTML='<div class="component-title"><span>🗂️</span><span>History</span></div> <div class="component-toggle">▼</div>',ye=b(),ee=d("div"),re=d("div"),R=d("div"),R.textContent="- no frame history",se=b(),Q=d("div"),ce=d("div"),ce.innerHTML='<div class="component-title"><span>⚙️</span><span>Controls</span></div> <div class="component-toggle">▼</div>',Pe=b(),ae=d("div"),Y=d("div"),T=d("div"),ue=d("div"),de=d("label"),de.textContent="Message:",K=b(),G=d("textarea"),j=b(),v=d("button"),v.textContent="Send Message",nt=b(),c(o,"class","dropdown-icon"),c(s,"class","dropdown-text"),c(s,"id",f=`dropdownText-${e[16].id}`),c(h,"class","dropdown-arrow"),c(i,"class","unified-dropdown-btn"),q(i,"width","100%"),c(l,"class","unified-dropdown"),c(l,"id",m=`dropdown-${e[16].id}`),c(n,"class","panel-header svelte-10xtvke"),c(J,"class","component-header"),c(y,"class","scrollable-component"),c(y,"id",S=`chatContent-${e[16].id}`),c(_,"class","component-content"),q(_,"max-height","25vh"),q(_,"overflow","auto"),c(I,"class","panel-component"),c(I,"id",x=`chat-${e[16].id}`),c(F,"class","component-header"),c(H,"class","scrollable-component"),c(H,"id",Z=`proposalsContent-${e[16].id}`),c(ie,"class","component-content"),q(ie,"max-height","25vh"),q(ie,"overflow","auto"),c(z,"class","panel-component"),c(z,"id",be=`proposals-${e[16].id}`),c(he,"class","component-header"),c(R,"class","empty-state svelte-10xtvke"),c(re,"class","entity-history-container"),c(re,"id",ke=`historyContent-${e[16].id}`),c(ee,"class","component-content"),q(ee,"max-height","25vh"),q(ee,"overflow","auto"),c(B,"class","panel-component"),c(B,"id",W=`history-${e[16].id}`),c(ce,"class","component-header"),c(de,"class","form-label"),c(G,"class","form-textarea"),c(G,"placeholder","Enter your message..."),c(ue,"class","form-group"),c(v,"class","form-button"),c(T,"class","controls-form"),c(T,"id",A=`controlsForm-${e[16].id}`),c(Y,"class","controls-section"),c(Y,"id",N=`controlsContent-${e[16].id}`),c(ae,"class","component-content"),q(ae,"max-height","400px"),q(ae,"overflow","auto"),c(Q,"class","panel-component"),c(Q,"id",we=`controls-${e[16].id}`),c(t,"class","entity-panel svelte-10xtvke"),c(t,"data-panel-id",je=e[16].id)},m(X,E){w(X,t,E),a(t,n),a(n,l),a(l,i),a(i,o),a(i,r),a(i,s),te.m(s,null),a(i,u),a(i,h),a(l,p),V&&V.m(l,null),a(t,$),a(t,I),a(I,J),a(I,pe),a(I,_),a(_,y),ne.m(y,null),a(t,C),a(t,z),a(z,F),a(z,_e),a(z,ie),a(ie,H),le.m(H,null),a(t,oe),a(t,B),a(B,he),a(B,ye),a(B,ee),a(ee,re),a(re,R),a(t,se),a(t,Q),a(Q,ce),a(Q,Pe),a(Q,ae),a(ae,Y),a(Y,T),a(T,ue),a(ue,de),a(ue,K),a(ue,G),st(),a(T,j),a(T,v),a(t,nt),Ue||(lt=[O(i,"click",Ft),O(J,"click",kn),O(F,"click",wn),O(he,"click",$n),O(ce,"click",Cn),O(v,"click",Bt)],Ue=!0)},p(X,E){e=X,Fe===(Fe=it(e))&&te?te.p(e,E):(te.d(1),te=Fe(e),te&&(te.c(),te.m(s,null))),E[0]&1&&f!==(f=`dropdownText-${e[16].id}`)&&c(s,"id",f),e[1][e[16].id]?V?V.p(e,E):(V=Et(e),V.c(),V.m(l,null)):V&&(V.d(1),V=null),E[0]&1&&m!==(m=`dropdown-${e[16].id}`)&&c(l,"id",m),Be===(Be=ot(e,E))&&ne?ne.p(e,E):(ne.d(1),ne=Be(e),ne&&(ne.c(),ne.m(y,null))),E[0]&1&&S!==(S=`chatContent-${e[16].id}`)&&c(y,"id",S),E[0]&1&&x!==(x=`chat-${e[16].id}`)&&c(I,"id",x),Re===(Re=rt(e,E))&&le?le.p(e,E):(le.d(1),le=Re(e),le&&(le.c(),le.m(H,null))),E[0]&1&&Z!==(Z=`proposalsContent-${e[16].id}`)&&c(H,"id",Z),E[0]&1&&be!==(be=`proposals-${e[16].id}`)&&c(z,"id",be),E[0]&1&&ke!==(ke=`historyContent-${e[16].id}`)&&c(re,"id",ke),E[0]&1&&W!==(W=`history-${e[16].id}`)&&c(B,"id",W),P!==e[16]&&(ct(),P=e[16],st()),E[0]&1&&A!==(A=`controlsForm-${e[16].id}`)&&c(T,"id",A),E[0]&1&&N!==(N=`controlsContent-${e[16].id}`)&&c(Y,"id",N),E[0]&1&&we!==(we=`controls-${e[16].id}`)&&c(Q,"id",we),E[0]&1&&je!==(je=e[16].id)&&c(t,"data-panel-id",je)},d(X){X&&k(t),te.d(),V&&V.d(),ne.d(),le.d(),ct(),Ue=!1,ve(lt)}}}function yn(e){let t,n,l=U(e[0]),i=[];for(let o=0;o<l.length;o+=1)i[o]=Tt(kt(e,l,o));return{c(){t=d("div");for(let o=0;o<i.length;o+=1)i[o].c();c(t,"id","entityPanelsContainer"),c(t,"class","entity-panels-container svelte-10xtvke"),c(t,"data-panel-count",n=e[0].length)},m(o,r){w(o,t,r);for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(t,null)},p(o,r){if(r[0]&255){l=U(o[0]);let s;for(s=0;s<l.length;s+=1){const f=kt(o,l,s);i[s]?i[s].p(f,r):(i[s]=Tt(f),i[s].c(),i[s].m(t,null))}for(;s<i.length;s+=1)i[s].d(1);i.length=l.length}r[0]&1&&n!==(n=o[0].length)&&c(t,"data-panel-count",n)},i:M,o:M,d(o){o&&k(t),Ce(i,o)}}}function At(e){return`tab-${e}`}const kn=()=>{},wn=()=>{},$n=()=>{},Cn=()=>{};function In(e,t,n){let l=[],i={};const o={};function r(){const _=Je(me),y=3;n(0,l=[]);for(let g=1;g<=y;g++)l.push({id:At(g),signer:null,entityId:null,title:`Entity Panel ${g}`}),n(1,i[At(g)]=!1,i);if(l[0]?.id,_&&_.replicas&&_.replicas.size>0){const g=Array.from(_.replicas.values())[0];n(0,l[0].signer=g.signerId,l),n(0,l[0].entityId=g.entityId,l)}}function s(_){n(1,i[_]=!i[_],i)}function f(){const _=Je(me),y={};if(!_?.replicas)return y;for(const g of _.replicas.values())y[g.signerId]||(y[g.signerId]=[]),y[g.signerId].push(g);return y}function u(_,y,g){const S=l.find(x=>x.id===_);S&&(S.signer=y,S.entityId=g),n(1,i[_]=!1,i)}function h(_){const y=Je(me);if(!y?.replicas||!_.signer||!_.entityId)return null;const g=`${_.entityId}:${_.signer}`;return y.replicas.get(g)??null}async function p(_,y){const g=Se(),S=Je(me);if(!g||!S||!_.signer||!_.entityId)return;const x={entityId:_.entityId,signerId:_.signer,entityTxs:[{type:"chat",data:{message:y}}]},C=g.applyServerInput(S,{serverTxs:[],entityInputs:[x]});g.processUntilEmpty(S,C.entityOutbox)}Ze(()=>{r()});function m(_){const y=o[_.id],g=y?.value?.trim();g&&(p(_,g),y.value="")}const $=_=>s(_.id),I=(_,y)=>u(_.id,y.signerId,y.entityId);function J(_,y){We[_?"unshift":"push"](()=>{o[y.id]=_,n(2,o)})}return[l,i,o,s,f,u,h,m,$,I,J,_=>m(_)]}class En extends tt{constructor(t){super(),et(this,t,In,yn,qe,{},null,[-1,-1])}}function Nn(e){let t,n,l,i,o,r,s,f,u,h,p;return o=new pn({}),h=new En({}),{c(){t=d("div"),n=d("div"),l=d("h2"),l.textContent="🏗️ Entity Formation",i=b(),ft(o.$$.fragment),r=b(),s=d("div"),f=d("h2"),f.textContent="👁️ Panels",u=b(),ft(h.$$.fragment),c(l,"class","font-semibold mb-2"),c(n,"class","col-span-1 bg-panel border border-outline rounded p-4"),c(f,"class","font-semibold mb-2"),c(s,"class","col-span-2 bg-panel border border-outline rounded p-4"),c(t,"class","grid grid-cols-1 lg:grid-cols-3 gap-4")},m(m,$){w(m,t,$),a(t,n),a(n,l),a(n,i),Qe(o,n,null),a(t,r),a(t,s),a(s,f),a(s,u),Qe(h,s,null),p=!0},i(m){p||(Me(o.$$.fragment,m),Me(h.$$.fragment,m),p=!0)},o(m){Xe(o.$$.fragment,m),Xe(h.$$.fragment,m),p=!1},d(m){m&&k(t),Ye(o),Ye(h)}}}function Ln(e){let t;return{c(){t=d("div"),t.textContent="Loading environment…",c(t,"class","text-gray-400")},m(n,l){w(n,t,l)},i:M,o:M,d(n){n&&k(t)}}}function Sn(e){let t,n,l,i,o,r,s;const f=[Ln,Nn],u=[];function h(p,m){return p[0]?1:0}return o=h(e),r=u[o]=f[o](e),{c(){t=d("main"),n=d("header"),n.innerHTML='<div class="max-w-screen-2xl mx-auto px-4 py-3 flex items-center justify-between"><div class="text-white font-mono text-xl">xln</div> <nav class="flex gap-2"><a href="#" class="px-3 py-1 rounded bg-accent/20 hover:bg-accent/30">Formation</a> <a href="#" class="px-3 py-1 rounded bg-accent/20 hover:bg-accent/30">Panels</a> <a href="#" class="px-3 py-1 rounded bg-accent/20 hover:bg-accent/30">Jurisdictions</a></nav></div>',l=b(),i=d("section"),r.c(),c(n,"class","sticky top-0 z-10 bg-black/60 backdrop-blur border-b border-outline"),c(i,"class","max-w-screen-2xl mx-auto p-4"),c(t,"class","min-h-screen")},m(p,m){w(p,t,m),a(t,n),a(t,l),a(t,i),u[o].m(i,null),s=!0},p(p,[m]){let $=o;o=h(p),o!==$&&(Kt(),Xe(u[$],1,1,()=>{u[$]=null}),Wt(),r=u[o],r||(r=u[o]=f[o](p),r.c()),Me(r,1),r.m(i,null))},i(p){s||(Me(r),s=!0)},o(p){Xe(r),s=!1},d(p){p&&k(t),u[o].d()}}}function Pn(e,t,n){let l=!1;return Ze(async()=>{await jt(),n(0,l=!0)}),[l]}class Tn extends tt{constructor(t){super(),et(this,t,Pn,Sn,qe,{})}}new Tn({target:document.getElementById("app")});
